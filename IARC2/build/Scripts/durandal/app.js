define(["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,n,a,r){function o(){return e.defer(function(t){return 0==g.length?(t.resolve(),void 0):(e.acquire(g).then(function(n){for(var a=0;a<n.length;a++){var r=n[a];if(r.install){var o=i[a];e.isObject(o)||(o={}),r.install(o),e.log("Plugin:Installed "+g[a])}else e.log("Plugin:Loaded "+g[a])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var l,g=[],i=[];return l={title:"Application",configurePlugins:function(t,n){var a=e.keys(t);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var r=0;r<a.length;r++){var o=a[r];g.push(n+o),i.push(t[o])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){r(function(){o().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(a,r,o){var l,g={activate:!0,transition:r};l=!o||e.isString(o)?document.getElementById(o||"applicationHost"):o,e.isString(a)?t.isViewUrl(a)?g.view=a:g.model=a:g.model=a,n.compose(l,g)}},a.includeIn(l),l});