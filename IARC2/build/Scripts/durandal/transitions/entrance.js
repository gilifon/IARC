define(["durandal/system","durandal/composition","jquery"],function(e,t,n){var a=100,r={marginRight:0,marginLeft:0,opacity:1},o={marginLeft:"",marginRight:"",opacity:"",display:""},g=function(t){return e.defer(function(e){function g(){e.resolve()}function l(){t.keepScrollPosition||n(document).scrollTop(0)}function i(){l(),t.triggerAttach();var e={marginLeft:d?"0":"20px",marginRight:d?"0":"-20px",opacity:0,display:"block"},a=n(t.child);a.css(e),a.animate(r,s,"swing",function(){a.css(o),g()})}if(t.child){var s=t.duration||500,d=!!t.fadeOnly;t.activeView?n(t.activeView).fadeOut(a,i):i()}else n(t.activeView).fadeOut(a,g)}).promise()};return g});