(function () {/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
//Going sloppy to avoid 'use strict' string cost, but strict practices should
//be followed.
/*jslint sloppy: true */
/*global setTimeout: false */

var requirejs, require, define;
(function (undef) {
    var main, req, makeMap, handlers,
        defined = {},
        waiting = {},
        config = {},
        defining = {},
        hasOwn = Object.prototype.hasOwnProperty,
        aps = [].slice;

    function hasProp(obj, prop) {
        return hasOwn.call(obj, prop);
    }

    /**
     * Given a relative module name, like ./something, normalize it to
     * a real name that can be mapped to a path.
     * @param {String} name the relative name
     * @param {String} baseName a real name that the name arg is relative
     * to.
     * @returns {String} normalized name
     */
    function normalize(name, baseName) {
        var nameParts, nameSegment, mapValue, foundMap,
            foundI, foundStarMap, starI, i, j, part,
            baseParts = baseName && baseName.split("/"),
            map = config.map,
            starMap = (map && map['*']) || {};

        //Adjust any relative paths.
        if (name && name.charAt(0) === ".") {
            //If have a base name, try to normalize against it,
            //otherwise, assume it is a top-level require that will
            //be relative to baseUrl in the end.
            if (baseName) {
                //Convert baseName to array, and lop off the last part,
                //so that . matches that "directory" and not name of the baseName's
                //module. For instance, baseName of "one/two/three", maps to
                //"one/two/three.js", but we want the directory, "one/two" for
                //this normalization.
                baseParts = baseParts.slice(0, baseParts.length - 1);

                name = baseParts.concat(name.split("/"));

                //start trimDots
                for (i = 0; i < name.length; i += 1) {
                    part = name[i];
                    if (part === ".") {
                        name.splice(i, 1);
                        i -= 1;
                    } else if (part === "..") {
                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {
                            //End of the line. Keep at least one non-dot
                            //path segment at the front so it can be mapped
                            //correctly to disk. Otherwise, there is likely
                            //no path mapping for a path starting with '..'.
                            //This can still fail, but catches the most reasonable
                            //uses of ..
                            break;
                        } else if (i > 0) {
                            name.splice(i - 1, 2);
                            i -= 2;
                        }
                    }
                }
                //end trimDots

                name = name.join("/");
            } else if (name.indexOf('./') === 0) {
                // No baseName, so this is ID is resolved relative
                // to baseUrl, pull off the leading dot.
                name = name.substring(2);
            }
        }

        //Apply map config if available.
        if ((baseParts || starMap) && map) {
            nameParts = name.split('/');

            for (i = nameParts.length; i > 0; i -= 1) {
                nameSegment = nameParts.slice(0, i).join("/");

                if (baseParts) {
                    //Find the longest baseName segment match in the config.
                    //So, do joins on the biggest to smallest lengths of baseParts.
                    for (j = baseParts.length; j > 0; j -= 1) {
                        mapValue = map[baseParts.slice(0, j).join('/')];

                        //baseName segment has  config, find if it has one for
                        //this name.
                        if (mapValue) {
                            mapValue = mapValue[nameSegment];
                            if (mapValue) {
                                //Match, update name to the new value.
                                foundMap = mapValue;
                                foundI = i;
                                break;
                            }
                        }
                    }
                }

                if (foundMap) {
                    break;
                }

                //Check for a star map match, but just hold on to it,
                //if there is a shorter segment match later in a matching
                //config, then favor over this star map.
                if (!foundStarMap && starMap && starMap[nameSegment]) {
                    foundStarMap = starMap[nameSegment];
                    starI = i;
                }
            }

            if (!foundMap && foundStarMap) {
                foundMap = foundStarMap;
                foundI = starI;
            }

            if (foundMap) {
                nameParts.splice(0, foundI, foundMap);
                name = nameParts.join('/');
            }
        }

        return name;
    }

    function makeRequire(relName, forceSync) {
        return function () {
            //A version of a require function that passes a moduleName
            //value for items that may need to
            //look up paths relative to the moduleName
            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));
        };
    }

    function makeNormalize(relName) {
        return function (name) {
            return normalize(name, relName);
        };
    }

    function makeLoad(depName) {
        return function (value) {
            defined[depName] = value;
        };
    }

    function callDep(name) {
        if (hasProp(waiting, name)) {
            var args = waiting[name];
            delete waiting[name];
            defining[name] = true;
            main.apply(undef, args);
        }

        if (!hasProp(defined, name) && !hasProp(defining, name)) {
            throw new Error('No ' + name);
        }
        return defined[name];
    }

    //Turns a plugin!resource to [plugin, resource]
    //with the plugin being undefined if the name
    //did not have a plugin prefix.
    function splitPrefix(name) {
        var prefix,
            index = name ? name.indexOf('!') : -1;
        if (index > -1) {
            prefix = name.substring(0, index);
            name = name.substring(index + 1, name.length);
        }
        return [prefix, name];
    }

    function onResourceLoad(name, defined, deps){
        if(requirejs.onResourceLoad && name){
            requirejs.onResourceLoad({defined:defined}, {id:name}, deps);
        }
    }

    /**
     * Makes a name map, normalizing the name, and using a plugin
     * for normalization if necessary. Grabs a ref to plugin
     * too, as an optimization.
     */
    makeMap = function (name, relName) {
        var plugin,
            parts = splitPrefix(name),
            prefix = parts[0];

        name = parts[1];

        if (prefix) {
            prefix = normalize(prefix, relName);
            plugin = callDep(prefix);
        }

        //Normalize according
        if (prefix) {
            if (plugin && plugin.normalize) {
                name = plugin.normalize(name, makeNormalize(relName));
            } else {
                name = normalize(name, relName);
            }
        } else {
            name = normalize(name, relName);
            parts = splitPrefix(name);
            prefix = parts[0];
            name = parts[1];
            if (prefix) {
                plugin = callDep(prefix);
            }
        }

        //Using ridiculous property names for space reasons
        return {
            f: prefix ? prefix + '!' + name : name, //fullName
            n: name,
            pr: prefix,
            p: plugin
        };
    };

    function makeConfig(name) {
        return function () {
            return (config && config.config && config.config[name]) || {};
        };
    }

    handlers = {
        require: function (name) {
            return makeRequire(name);
        },
        exports: function (name) {
            var e = defined[name];
            if (typeof e !== 'undefined') {
                return e;
            } else {
                return (defined[name] = {});
            }
        },
        module: function (name) {
            return {
                id: name,
                uri: '',
                exports: defined[name],
                config: makeConfig(name)
            };
        }
    };

    main = function (name, deps, callback, relName) {
        var cjsModule, depName, ret, map, i,
            args = [],
            usingExports;

        //Use name if no relName
        relName = relName || name;

        //Call the callback to define the module, if necessary.
        if (typeof callback === 'function') {

            //Pull out the defined dependencies and pass the ordered
            //values to the callback.
            //Default to [require, exports, module] if no deps
            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;
            for (i = 0; i < deps.length; i += 1) {
                map = makeMap(deps[i], relName);
                depName = map.f;

                //Fast path CommonJS standard dependencies.
                if (depName === "require") {
                    args[i] = handlers.require(name);
                } else if (depName === "exports") {
                    //CommonJS module spec 1.1
                    args[i] = handlers.exports(name);
                    usingExports = true;
                } else if (depName === "module") {
                    //CommonJS module spec 1.1
                    cjsModule = args[i] = handlers.module(name);
                } else if (hasProp(defined, depName) ||
                           hasProp(waiting, depName) ||
                           hasProp(defining, depName)) {
                    args[i] = callDep(depName);
                } else if (map.p) {
                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});
                    args[i] = defined[depName];
                } else {
                    throw new Error(name + ' missing ' + depName);
                }
            }

            ret = callback.apply(defined[name], args);

            if (name) {
                //If setting exports via "module" is in play,
                //favor that over return value and exports. After that,
                //favor a non-undefined return value over exports use.
                if (cjsModule && cjsModule.exports !== undef &&
                        cjsModule.exports !== defined[name]) {
                    defined[name] = cjsModule.exports;
                } else if (ret !== undef || !usingExports) {
                    //Use the return value from the function.
                    defined[name] = ret;
                }
            }
        } else if (name) {
            //May just be an object definition for the module. Only
            //worry about defining if have a module name.
            defined[name] = callback;
        }

        onResourceLoad(name, defined, args);
    };

    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {
        if (typeof deps === "string") {
            if (handlers[deps]) {
                //callback in this case is really relName
                return handlers[deps](callback);
            }
            //Just return the module wanted. In this scenario, the
            //deps arg is the module name, and second arg (if passed)
            //is just the relName.
            //Normalize module name, if it contains . or ..
            return callDep(makeMap(deps, callback).f);
        } else if (!deps.splice) {
            //deps is a config object, not an array.
            config = deps;
            if (callback.splice) {
                //callback is an array, which means it is a dependency list.
                //Adjust args if there are dependencies
                deps = callback;
                callback = relName;
                relName = null;
            } else {
                deps = undef;
            }
        }

        //Support require(['a'])
        callback = callback || function () {};

        //If relName is a function, it is an errback handler,
        //so remove it.
        if (typeof relName === 'function') {
            relName = forceSync;
            forceSync = alt;
        }

        //Simulate async callback;
        if (forceSync) {
            main(undef, deps, callback, relName);
        } else {
            //Using a non-zero value because of concern for what old browsers
            //do, and latest browsers "upgrade" to 4 if lower value is used:
            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:
            //If want a value immediately, use require('id') instead -- something
            //that works in almond on the global level, but not guaranteed and
            //unlikely to work in other AMD implementations.
            setTimeout(function () {
                main(undef, deps, callback, relName);
            }, 4);
        }

        return req;
    };

    /**
     * Just drops the config on the floor, but returns req in case
     * the config return value is used.
     */
    req.config = function (cfg) {
        config = cfg;
        if (config.deps) {
            req(config.deps, config.callback);
        }
        return req;
    };

    /**
     * Expose module registry for debugging and tooling
     */
    requirejs._defined = defined;

    define = function (name, deps, callback) {

        //This module may not have dependencies
        if (!deps.splice) {
            //deps is not an array, so probably means
            //an object literal or factory function for
            //the value. Adjust args.
            callback = deps;
            deps = [];
        }

        if (!hasProp(defined, name) && !hasProp(waiting, name)) {
            waiting[name] = [name, deps, callback];
        }
    };

    define.amd = {
        jQuery: true
    };
}());

define("../Scripts/almond-custom", function(){});

define('durandal/system',["require","jquery"],function(e,t){function r(e){var t="[object "+e+"]";n["is"+e]=function(e){return s.call(e)==t}}var n,i=!1,a=Object.keys,o=Object.prototype.hasOwnProperty,s=Object.prototype.toString,l=!1,c=Array.isArray,d=Array.prototype.slice;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(u){l=!0}e.on&&e.on("moduleLoaded",function(e,t){n.setModuleId(e,t)}),"undefined"!=typeof requirejs&&(requirejs.onResourceLoad=function(e,t){n.setModuleId(e.defined[t.id],t.id)});var v=function(){},p=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;e<arguments.length;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==d.call(arguments).length&&"string"==typeof d.call(arguments)[0]?console.log(d.call(arguments).toString()):console.log.apply(console,d.call(arguments));else Function.prototype.bind&&!l||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,d.call(arguments))}catch(t){}},g=function(e){if(e instanceof Error)throw e;throw new Error(e)};n={version:"2.0.1",noop:v,getModuleId:function(e){return e?"function"==typeof e?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e?(e.prototype.__moduleId__=t,void 0):("string"!=typeof e&&(e.__moduleId__=t),void 0):void 0},resolveObject:function(e){return n.isFunction(e)?new e:e},debug:function(e){return 1==arguments.length&&(i=e,i?(this.log=p,this.error=g,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=v,this.error=v)),i},log:v,error:v,assert:function(e,t){e||n.error(new Error(t||"Assert:Failed"))},defer:function(e){return t.Deferred(e)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),r="x"==e?t:8|3&t;return r.toString(16)})},acquire:function(){var t,r=arguments[0],i=!1;return n.isArray(r)?(t=r,i=!0):t=d.call(arguments,0),this.defer(function(r){e(t,function(){var e=arguments;setTimeout(function(){e.length>1||i?r.resolve(d.call(e,0)):r.resolve(e[0])},1)},function(e){r.reject(e)})}).promise()},extend:function(e){for(var t=d.call(arguments,1),r=0;r<t.length;r++){var n=t[r];if(n)for(var i in n)e[i]=n[i]}return e},wait:function(e){return n.defer(function(t){setTimeout(t.resolve,e)}).promise()}},n.keys=a||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var r in e)o.call(e,r)&&(t[t.length]=r);return t},n.isElement=function(e){return!(!e||1!==e.nodeType)},n.isArray=c||function(e){return"[object Array]"==s.call(e)},n.isObject=function(e){return e===Object(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isPromise=function(e){return e&&n.isFunction(e.then)};for(var f=["Arguments","Function","String","Number","Date","RegExp"],h=0;h<f.length;h++)r(f[h]);return n});
define('durandal/viewEngine',["durandal/system","jquery"],function(e,t){var n;return n=t.parseHTML?function(e){return t.parseHTML(e)}:function(e){return t(e).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){return this.viewPlugin+"!"+e+this.viewExtension},parseMarkup:n,processMarkup:function(e){var t=this.parseMarkup(e);return this.ensureSingleElement(t)},ensureSingleElement:function(e){if(1==e.length)return e[0];for(var n=[],r=0;r<e.length;r++){var i=e[r];if(8!=i.nodeType){if(3==i.nodeType){var a=/\S/.test(i.nodeValue);if(!a)continue}n.push(i)}}return n.length>1?t(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},createView:function(t){var n=this,r=this.convertViewIdToRequirePath(t);return e.defer(function(i){e.acquire(r).then(function(e){var r=n.processMarkup(e);r.setAttribute("data-view",t),i.resolve(r)}).fail(function(e){n.createFallbackView(t,r,e).then(function(e){e.setAttribute("data-view",t),i.resolve(e)})})}).promise()},createFallbackView:function(t,n){var r=this,i='View Not Found. Searched for "'+t+'" via path "'+n+'".';return e.defer(function(e){e.resolve(r.processMarkup('<div class="durandal-view-404">'+i+"</div>"))}).promise()}}});
define('durandal/viewLocator',["durandal/system","durandal/viewEngine"],function(e,t){function r(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=n.getAttribute("data-view");if(i==t)return n}}function n(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,r){e=e||"viewmodels",t=t||"views",r=r||t;var i=new RegExp(n(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(i,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?r+"/"+t+"/"+e:r+"/"+e}},locateViewForObject:function(t,r,n){var i;if(t.getView&&(i=t.getView()))return this.locateView(i,r,n);if(t.viewUrl)return this.locateView(t.viewUrl,r,n);var a=e.getModuleId(t);return a?this.locateView(this.convertModuleIdToViewId(a),r,n):this.locateView(this.determineFallbackViewId(t),r,n)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,r=t.exec(e.constructor.toString()),n=r&&r.length>1?r[1]:"";return"views/"+n},translateViewIdToArea:function(e){return e},locateView:function(n,i,a){if("string"==typeof n){var o;if(o=t.isViewUrl(n)?t.convertViewUrlToViewId(n):n,i&&(o=this.translateViewIdToArea(o,i)),a){var s=r(a,o);if(s)return e.defer(function(e){e.resolve(s)}).promise()}return t.createView(o)}return e.defer(function(e){e.resolve(n)}).promise()}}});
define('durandal/binder',["durandal/system","knockout"],function(e,t){function r(t){return void 0===t?{applyBindings:!0}:e.isBoolean(t)?{applyBindings:t}:(void 0===t.applyBindings&&(t.applyBindings=!0),t)}function n(n,c,d,u){if(!c||!d)return i.throwOnErrors?e.error(a):e.log(a,c,u),void 0;if(!c.getAttribute)return i.throwOnErrors?e.error(s):e.log(s,c,u),void 0;var v=c.getAttribute("data-view");try{var p;return n&&n.binding&&(p=n.binding(c)),p=r(p),i.binding(u,c,p),p.applyBindings?(e.log("Binding",v,u),t.applyBindings(d,c)):n&&t.utils.domData.set(c,l,{$data:n}),i.bindingComplete(u,c,p),n&&n.bindingComplete&&n.bindingComplete(c),t.utils.domData.set(c,o,p),p}catch(h){h.message=h.message+";\nView: "+v+";\nModuleId: "+e.getModuleId(u),i.throwOnErrors?e.error(h):e.log(h.message)}}var i,a="Insufficient Information to Bind",s="Unexpected View Type",o="durandal-binding-instruction",l="__ko_bindingContext__";return i={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,o)},bindContext:function(e,t,r){return r&&e&&(e=e.createChildContext(r)),n(r,t,e,r||(e?e.$data:null))},bind:function(e,t){return n(e,t,e,e)}}});
define('durandal/activator',["durandal/system","knockout"],function(e,t){function r(e){return void 0==e&&(e={}),e.closeOnDeactivate||(e.closeOnDeactivate=c.defaults.closeOnDeactivate),e.beforeActivate||(e.beforeActivate=c.defaults.beforeActivate),e.afterDeactivate||(e.afterDeactivate=c.defaults.afterDeactivate),e.affirmations||(e.affirmations=c.defaults.affirmations),e.interpretResponse||(e.interpretResponse=c.defaults.interpretResponse),e.areSameItem||(e.areSameItem=c.defaults.areSameItem),e}function n(t,r,n){return e.isArray(n)?t[r].apply(t,n):t[r](n)}function i(t,r,n,i,a){if(t&&t.deactivate){e.log("Deactivating",t);var s;try{s=t.deactivate(r)}catch(o){return e.error(o),i.resolve(!1),void 0}s&&s.then?s.then(function(){n.afterDeactivate(t,r,a),i.resolve(!0)},function(t){e.log(t),i.resolve(!1)}):(n.afterDeactivate(t,r,a),i.resolve(!0))}else t&&n.afterDeactivate(t,r,a),i.resolve(!0)}function a(t,r,i,a){if(t)if(t.activate){e.log("Activating",t);var s;try{s=n(t,"activate",a)}catch(o){return e.error(o),i(!1),void 0}s&&s.then?s.then(function(){r(t),i(!0)},function(t){e.log(t),i(!1)}):(r(t),i(!0))}else r(t),i(!0);else i(!0)}function s(t,r,n){return n.lifecycleData=null,e.defer(function(i){if(t&&t.canDeactivate){var a;try{a=t.canDeactivate(r)}catch(s){return e.error(s),i.resolve(!1),void 0}a.then?a.then(function(e){n.lifecycleData=e,i.resolve(n.interpretResponse(e))},function(t){e.error(t),i.resolve(!1)}):(n.lifecycleData=a,i.resolve(n.interpretResponse(a)))}else i.resolve(!0)}).promise()}function o(t,r,i,a){return i.lifecycleData=null,e.defer(function(s){if(t==r())return s.resolve(!0),void 0;if(t&&t.canActivate){var o;try{o=n(t,"canActivate",a)}catch(l){return e.error(l),s.resolve(!1),void 0}o.then?o.then(function(e){i.lifecycleData=e,s.resolve(i.interpretResponse(e))},function(t){e.error(t),s.resolve(!1)}):(i.lifecycleData=o,s.resolve(i.interpretResponse(o)))}else s.resolve(!0)}).promise()}function l(n,l){var c,d=t.observable(null);l=r(l);var u=t.computed({read:function(){return d()},write:function(e){u.viaSetter=!0,u.activateItem(e)}});return u.__activator__=!0,u.settings=l,l.activator=u,u.isActivating=t.observable(!1),u.canDeactivateItem=function(e,t){return s(e,t,l)},u.deactivateItem=function(t,r){return e.defer(function(e){u.canDeactivateItem(t,r).then(function(n){n?i(t,r,l,e,d):(u.notifySubscribers(),e.resolve(!1))})}).promise()},u.canActivateItem=function(e,t){return o(e,d,l,t)},u.activateItem=function(t,r){var n=u.viaSetter;return u.viaSetter=!1,e.defer(function(s){if(u.isActivating())return s.resolve(!1),void 0;u.isActivating(!0);var o=d();return l.areSameItem(o,t,c,r)?(u.isActivating(!1),s.resolve(!0),void 0):(u.canDeactivateItem(o,l.closeOnDeactivate).then(function(v){v?u.canActivateItem(t,r).then(function(v){v?e.defer(function(e){i(o,l.closeOnDeactivate,l,e)}).promise().then(function(){t=l.beforeActivate(t,r),a(t,d,function(e){c=r,u.isActivating(!1),s.resolve(e)},r)}):(n&&u.notifySubscribers(),u.isActivating(!1),s.resolve(!1))}):(n&&u.notifySubscribers(),u.isActivating(!1),s.resolve(!1))}),void 0)}).promise()},u.canActivate=function(){var e;return n?(e=n,n=!1):e=u(),u.canActivateItem(e)},u.activate=function(){var e;return n?(e=n,n=!1):e=u(),u.activateItem(e)},u.canDeactivate=function(e){return u.canDeactivateItem(u(),e)},u.deactivate=function(e){return u.deactivateItem(u(),e)},u.includeIn=function(e){e.canActivate=function(){return u.canActivate()},e.activate=function(){return u.activate()},e.canDeactivate=function(e){return u.canDeactivate(e)},e.deactivate=function(e){return u.deactivate(e)}},l.includeIn?u.includeIn(l.includeIn):n&&u.activate(),u.forItems=function(t){l.closeOnDeactivate=!1,l.determineNextItemToActivate=function(e,t){var r=t-1;return-1==r&&e.length>1?e[1]:r>-1&&r<e.length-1?e[r]:null},l.beforeActivate=function(e){var r=u();if(e){var n=t.indexOf(e);-1==n?t.push(e):e=t()[n]}else e=l.determineNextItemToActivate(t,r?t.indexOf(r):0);return e},l.afterDeactivate=function(e,r){r&&t.remove(e)};var r=u.canDeactivate;u.canDeactivate=function(n){return n?e.defer(function(e){function r(){for(var t=0;t<a.length;t++)if(!a[t])return e.resolve(!1),void 0;e.resolve(!0)}for(var i=t(),a=[],s=0;s<i.length;s++)u.canDeactivateItem(i[s],n).then(function(e){a.push(e),a.length==i.length&&r()})}).promise():r()};var n=u.deactivate;return u.deactivate=function(r){return r?e.defer(function(e){function n(n){u.deactivateItem(n,r).then(function(){a++,t.remove(n),a==s&&e.resolve()})}for(var i=t(),a=0,s=i.length,o=0;s>o;o++)n(i[o])}).promise():n()},u},u}var c,d={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(r){return e.isObject(r)&&(r=r.can||!1),e.isString(r)?-1!==t.utils.arrayIndexOf(this.affirmations,r.toLowerCase()):r},areSameItem:function(e,t){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,r){t&&r&&r(null)}};return c={defaults:d,create:l,isActivator:function(e){return e&&e.__activator__}}});
define('durandal/composition',["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(e,t,r,i,n,a,o){function s(e){for(var t=[],r={childElements:t,activeView:null},i=o.virtualElements.firstChild(e);i;)1==i.nodeType&&(t.push(i),i.getAttribute(x)&&(r.activeView=i)),i=o.virtualElements.nextSibling(i);return r.activeView||(r.activeView=t[0]),r}function l(){A--,0===A&&setTimeout(function(){for(var t=S.length;t--;)try{S[t]()}catch(r){e.error(r)}S=[]},1)}function c(e){delete e.activeView,delete e.viewElements}function d(t,r,i){if(i)r();else if(t.activate&&t.model&&t.model.activate){var n;try{n=e.isArray(t.activationData)?t.model.activate.apply(t.model,t.activationData):t.model.activate(t.activationData),n&&n.then?n.then(r,function(t){e.error(t),r()}):n||void 0===n?r():(l(),c(t))}catch(a){e.error(a)}}else r()}function u(){var t=this;if(t.activeView&&t.activeView.removeAttribute(x),t.child)try{t.model&&t.model.attached&&(t.composingNewView||t.alwaysTriggerAttach)&&t.model.attached(t.child,t.parent,t),t.attached&&t.attached(t.child,t.parent,t),t.child.setAttribute(x,!0),t.composingNewView&&t.model&&t.model.detached&&o.utils.domNodeDisposal.addDisposeCallback(t.child,function(){try{t.model.detached(t.child,t.parent,t)}catch(r){e.error(r)}})}catch(r){e.error(r)}t.triggerAttach=e.noop}function v(t){if(e.isString(t.transition)){if(t.activeView){if(t.activeView==t.child)return!1;if(!t.child)return!0;if(t.skipTransitionOnSameViewId){var r=t.activeView.getAttribute("data-view"),i=t.child.getAttribute("data-view");return r!=i}}return!0}return!1}function p(e){for(var t=0,r=e.length,i=[];r>t;t++){var n=e[t].cloneNode(!0);i.push(n)}return i}function h(e){var t=p(e.parts),r=y.getParts(t,null,!0),i=y.getParts(e.child);for(var n in r)a(i[n]).replaceWith(r[n])}function g(t){var r,i,n=o.virtualElements.childNodes(t.parent);if(!e.isArray(n)){var a=[];for(r=0,i=n.length;i>r;r++)a[r]=n[r];n=a}for(r=1,i=n.length;i>r;r++)o.removeNode(n[r])}function f(e){o.utils.domData.set(e,T,e.style.display),e.style.display="none"}function m(e){e.style.display=o.utils.domData.get(e,T)}function b(e){var t=e.getAttribute("data-bind");if(!t)return!1;for(var r=0,i=D.length;i>r;r++)if(t.indexOf(D[r])>-1)return!0;return!1}var y,w={},x="data-active-view",S=[],A=0,k="durandal-composition-data",I="data-part",C=["model","view","transition","area","strategy","activationData"],T="durandal-visibility-data",D=["compose:"],O={complete:function(e){S.push(e)}};return y={composeBindings:D,convertTransitionToModuleId:function(e){return"transitions/"+e},defaultTransitionName:null,current:O,addBindingHandler:function(e,t,r){var i,n,a="composition-handler-"+e;t=t||o.bindingHandlers[e],r=r||function(){return void 0},n=o.bindingHandlers[e]={init:function(e,i,n,s,l){if(A>0){var c={trigger:o.observable(null)};y.current.complete(function(){t.init&&t.init(e,i,n,s,l),t.update&&(o.utils.domData.set(e,a,t),c.trigger("trigger"))}),o.utils.domData.set(e,a,c)}else o.utils.domData.set(e,a,t),t.init&&t.init(e,i,n,s,l);return r(e,i,n,s,l)},update:function(e,t,r,i,n){var s=o.utils.domData.get(e,a);return s.update?s.update(e,t,r,i,n):(s.trigger&&s.trigger(),void 0)}};for(i in t)"init"!==i&&"update"!==i&&(n[i]=t[i])},getParts:function(e,t,r){if(t=t||{},!e)return t;void 0===e.length&&(e=[e]);for(var i=0,n=e.length;n>i;i++){var a=e[i];if(a.getAttribute){if(!r&&b(a))continue;var o=a.getAttribute(I);o&&(t[o]=a),!r&&a.hasChildNodes()&&y.getParts(a.childNodes,t)}}return t},cloneNodes:p,finalize:function(t){if(void 0===t.transition&&(t.transition=this.defaultTransitionName),t.child||t.activeView)if(v(t)){var i=this.convertTransitionToModuleId(t.transition);e.acquire(i).then(function(e){t.transition=e,e(t).then(function(){if(t.cacheViews){if(t.activeView){var e=r.getBindingInstruction(t.activeView);e&&void 0!=e.cacheViews&&!e.cacheViews&&o.removeNode(t.activeView)}}else t.child?g(t):o.virtualElements.emptyNode(t.parent);t.triggerAttach(),l(),c(t)})}).fail(function(t){e.error("Failed to load transition ("+i+"). Details: "+t.message)})}else{if(t.child!=t.activeView){if(t.cacheViews&&t.activeView){var n=r.getBindingInstruction(t.activeView);!n||void 0!=n.cacheViews&&!n.cacheViews?o.removeNode(t.activeView):f(t.activeView)}t.child?(t.cacheViews||g(t),m(t.child)):t.cacheViews||o.virtualElements.emptyNode(t.parent)}t.triggerAttach(),l(),c(t)}else t.cacheViews||o.virtualElements.emptyNode(t.parent),t.triggerAttach(),l(),c(t)},bindAndShow:function(e,t,n){t.child=e,t.composingNewView=t.cacheViews?-1==o.utils.arrayIndexOf(t.viewElements,e):!0,d(t,function(){if(t.binding&&t.binding(t.child,t.parent,t),t.preserveContext&&t.bindingContext)t.composingNewView&&(t.parts&&h(t),f(e),o.virtualElements.prepend(t.parent,e),r.bindContext(t.bindingContext,e,t.model));else if(e){var n=t.model||w,a=o.dataFor(e);if(a!=n){if(!t.composingNewView)return o.removeNode(e),i.createView(e.getAttribute("data-view")).then(function(e){y.bindAndShow(e,t,!0)}),void 0;t.parts&&h(t),f(e),o.virtualElements.prepend(t.parent,e),r.bind(n,e)}}y.finalize(t)},n)},defaultStrategy:function(e){return t.locateViewForObject(e.model,e.area,e.viewElements)},getSettings:function(t){var r,a=t(),s=o.utils.unwrapObservable(a)||{},l=n.isActivator(a);if(e.isString(s))return s=i.isViewUrl(s)?{view:s}:{model:s,activate:!0};if(r=e.getModuleId(s))return s={model:s,activate:!0};!l&&s.model&&(l=n.isActivator(s.model));for(var c in s)s[c]=-1!=o.utils.arrayIndexOf(C,c)?o.utils.unwrapObservable(s[c]):s[c];return l?s.activate=!1:void 0===s.activate&&(s.activate=!0),s},executeStrategy:function(e){e.strategy(e).then(function(t){y.bindAndShow(t,e)})},inject:function(r){return r.model?r.view?(t.locateView(r.view,r.area,r.viewElements).then(function(e){y.bindAndShow(e,r)}),void 0):(r.strategy||(r.strategy=this.defaultStrategy),e.isString(r.strategy)?e.acquire(r.strategy).then(function(e){r.strategy=e,y.executeStrategy(r)}).fail(function(t){e.error("Failed to load view strategy ("+r.strategy+"). Details: "+t.message)}):this.executeStrategy(r),void 0):(this.bindAndShow(null,r),void 0)},compose:function(r,i,n,a){A++,a||(i=y.getSettings(function(){return i},r)),i.compositionComplete&&S.push(function(){i.compositionComplete(i.child,i.parent,i)}),S.push(function(){i.composingNewView&&i.model&&i.model.compositionComplete&&i.model.compositionComplete(i.child,i.parent,i)});var o=s(r);i.activeView=o.activeView,i.parent=r,i.triggerAttach=u,i.bindingContext=n,i.cacheViews&&!i.viewElements&&(i.viewElements=o.childElements),i.model?e.isString(i.model)?e.acquire(i.model).then(function(t){i.model=e.resolveObject(t),y.inject(i)}).fail(function(t){e.error("Failed to load composed module ("+i.model+"). Details: "+t.message)}):y.inject(i):i.view?(i.area=i.area||"partial",i.preserveContext=!0,t.locateView(i.view,i.area,i.viewElements).then(function(e){y.bindAndShow(e,i)})):this.bindAndShow(null,i)}},o.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,r,n,a){var s=y.getSettings(t,e);if(s.mode){var l=o.utils.domData.get(e,k);if(!l){var c=o.virtualElements.childNodes(e);l={},"inline"===s.mode?l.view=i.ensureSingleElement(c):"templated"===s.mode&&(l.parts=p(c)),o.virtualElements.emptyNode(e),o.utils.domData.set(e,k,l)}"inline"===s.mode?s.view=l.view.cloneNode(!0):"templated"===s.mode&&(s.parts=l.parts),s.preserveContext=!0}y.compose(e,s,a,!0)}},o.virtualElements.allowedBindings.compose=!0,y});
define('durandal/events',["durandal/system"],function(e){var t=/\s+/,r=function(){},i=function(e,t){this.owner=e,this.events=t};return i.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},i.prototype.on=i.prototype.then,i.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},r.prototype.on=function(e,r,n){var a,o,s;if(r){for(a=this.callbacks||(this.callbacks={}),e=e.split(t);o=e.shift();)s=a[o]||(a[o]=[]),s.push(r,n);return this}return new i(this,e)},r.prototype.off=function(r,i,n){var a,o,s,l;if(!(o=this.callbacks))return this;if(!(r||i||n))return delete this.callbacks,this;for(r=r?r.split(t):e.keys(o);a=r.shift();)if((s=o[a])&&(i||n))for(l=s.length-2;l>=0;l-=2)i&&s[l]!==i||n&&s[l+1]!==n||s.splice(l,2);else delete o[a];return this},r.prototype.trigger=function(e){var r,i,n,a,o,s,l,c;if(!(i=this.callbacks))return this;for(c=[],e=e.split(t),a=1,o=arguments.length;o>a;a++)c[a-1]=arguments[a];for(;r=e.shift();){if((l=i.all)&&(l=l.slice()),(n=i[r])&&(n=n.slice()),n)for(a=0,o=n.length;o>a;a+=2)n[a].apply(n[a+1]||this,c);if(l)for(s=[r].concat(c),a=0,o=l.length;o>a;a+=2)l[a].apply(l[a+1]||this,s)}return this},r.prototype.proxy=function(e){var t=this;return function(r){t.trigger(e,r)}},r.includeIn=function(e){e.on=r.prototype.on,e.off=r.prototype.off,e.trigger=r.prototype.trigger,e.proxy=r.prototype.proxy},r});
define('durandal/app',["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,r,n,i){function a(){return e.defer(function(t){return 0==o.length?(t.resolve(),void 0):(e.acquire(o).then(function(r){for(var n=0;n<r.length;n++){var i=r[n];if(i.install){var a=l[n];e.isObject(a)||(a={}),i.install(a),e.log("Plugin:Installed "+o[n])}else e.log("Plugin:Loaded "+o[n])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var s,o=[],l=[];return s={title:"Application",configurePlugins:function(t,r){var n=e.keys(t);r=r||"plugins/",-1===r.indexOf("/",r.length-1)&&(r+="/");for(var i=0;i<n.length;i++){var a=n[i];o.push(r+a),l.push(t[a])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){i(function(){a().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(n,i,a){var s,o={activate:!0,transition:i};s=!a||e.isString(a)?document.getElementById(a||"applicationHost"):a,e.isString(n)?t.isViewUrl(n)?o.view=n:o.model=n:o.model=n,r.compose(s,o)}},n.includeIn(s),s});
requirejs.config({paths:{text:"../Scripts/text",durandal:"../Scripts/durandal",plugins:"../Scripts/durandal/plugins",transitions:"../Scripts/durandal/transitions"}}),define("jquery",[],function(){return jQuery}),define("knockout",ko),define('main',["durandal/system","durandal/app","durandal/viewLocator"],function(e,t,n){e.debug(!0),t.title="אגודת חובבי הרדיו בישראל - קורס מתוקשב",t.configurePlugins({router:!0,dialog:!0,widget:!0}),t.start().then(function(){n.useConvention(),t.setRoot("viewmodels/shell","entrance")})});
define('services/cachingService',[],function(){var e=function(e,t){amplify.store(e,t)},t=function(e){return amplify.store(e)},n={add:e,get:t};return n});
define('services/displayService',["durandal/app"],function(){var e=function(e,t){switch(toastr.options={positionClass:"toast-top-full-width",fadeIn:300,fadeOut:1e3,timeOut:3e3,extendedTimeOut:1e3},t){case"error":toastr.error(e,"שגיאה!");break;case"info":toastr.info(e,"לידיעתך!");break;case"warning":toastr.warning(e,"אזהרה!");break;case"Success":toastr.warning(e,"יופי!");break;default:toastr.success(e,"יופי!")}};return{display:e}});
define('services/enums',[],function(){var e={Status:{OK:"0",INFO:"1",ERROR:"2"}};return e});
define('services/themeManager',[],function(){var e="style",t=30,n=function(n){var r,a;for(r=0,a=document.getElementsByTagName("link");r<a.length;r++)-1!=a[r].rel.indexOf("stylesheet")&&a[r].title&&(a[r].disabled=!0,a[r].title==n&&(a[r].disabled=!1)),i(e,n,t)},r=function(){var t=a(e);t.length&&n(t)},i=function(e,t,n,r){var i=r?"; domain="+r:"";document.cookie=e+"="+encodeURIComponent(t)+"; max-age="+86400*n+"; path=/"+i},a=function(e){var t=document.cookie;if(0!=t.length){t.match("(^|;)[s]*"+e+"=([^;]*)");var n=t.match(e+"=([^;]*)");return decodeURIComponent(n[1])}return""},o={switch_style:n,set_style_from_cookie:r};return o});
define('services/utilities',[],function(){base64Keys="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",base64Encode=function(e){var t,n,r,i,a,o,s,l,d;for(d="",l=0,e=utf8Encode(e);l<e.length;)t=e.charCodeAt(l++),n=e.charCodeAt(l++),r=e.charCodeAt(l++),i=t>>2,a=(3&t)<<4|n>>4,o=(15&n)<<2|r>>6,s=63&r,isNaN(n)?o=s=64:isNaN(r)&&(s=64),d=""+d+base64Keys.charAt(i)+base64Keys.charAt(a)+(64>o?base64Keys.charAt(o):"")+(64>s?base64Keys.charAt(s):"");return d},utf8Encode=function(e){var t,n,r,i,a,o;for(e=e.replace(/\r\n/g,"\n"),r="",o=e.split(""),i=0,a=o.length;a>i;i++)n=o[i],t=n.charCodeAt(0),128>t?r+=String.fromCharCode(t):t>127&&2048>t?(r+=String.fromCharCode(192|t>>6),r+=String.fromCharCode(128|63&t)):(r+=String.fromCharCode(224|t>>12),r+=String.fromCharCode(128|63&t>>6),r+=String.fromCharCode(128|63&t));return r};var e=function(e,t){var n=e+":"+t,r=base64Encode(n);return r},t=function(e){var t=$(e),n=[t.size()],r=0;return t.each(function(){n[r]=$(this).attr("id"),r++}),n},n=function(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e},r=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},i={encode64:base64Encode,getBase64Auth:e,getOrder:t,pad:n,safe_tags:r};return i});
define('viewmodels/exams',['require'],function(e){return this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.examList=ko.observableArray(),this.getData=function(){$.ajax({type:"GET",url:"./Server/exam/get.php?d="+Date.now(),headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))}}).done(function(e){examList(e)}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},{compositionComplete:function(){getData()},activate:function(){},examList:examList,getData:getData}});
define('viewmodels/examsmanager',['require'],function(e){this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.displayService=e("services/displayService"),this.exams=e("viewmodels/exams");var t,n=ko.observable(""),r=ko.observable("");return this.remove=function(e){confirm("You are about to delete this exam. Are you sure?")&&$.ajax({type:"POST",url:"./Server/exam/delete.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{exam:e}}).done(function(e){displayService.display(e),exams.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},this.clearControl=function(){n(""),r("")},this.addItem=function(){var e={newexam:{t:r,d:n}};return""===$.trim(n())?(displayService.display("חובה להכניס תיאור","error"),void 0):($.ajax({type:"POST",url:"./Server/exam/add.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:e}).done(function(e){clearControl(),displayService.display(e),exams.getData()}).error(function(e){clearControl(),alert(jQuery.parseJSON(e.responseText).error)}),void 0)},this.reorder=function(e){$.ajax({type:"POST",url:"./Server/reorder.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{list:utilities.getOrder(e),table:"exams"}}).done(function(){exams.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},this.Send=function(){""!==n()&&t.getQueueSize()>0?t.submit():(displayService.display("חובה להכניס תיאור","error"),complete(!0))},{compositionComplete:function(){exams.getData(),$.placeholder.fix(),$(".sortable").sortable({placeholder:"ui-state-highlight",update:function(){reorder(".sortable tr")}}),$(".sortable").disableSelection();var e=document.getElementById("upload-btn"),n=document.getElementById("pic-progress-wrap"),i=(document.getElementById("picbox"),document.getElementById("errormsg"));t=new ss.SimpleUpload({button:e,url:"./Server/uploadHandler.php?dir=exams",name:"uploadfile",multiple:!1,queue:!1,maxUploads:1,hoverClass:"btn-hover",focusClass:"active",disabledClass:"disabled",responseType:"json",autoSubmit:!1,onChange:function(e){r(e)},onSubmit:function(e){var t=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");t.className="prog",o.className="size",r.className="progress progress-striped active",a.className="progress-bar progress-bar-success",r.appendChild(a),t.innerHTML='<span style="vertical-align:middle;">'+utilities.safe_tags(e)+" - </span>",t.appendChild(o),t.appendChild(r),n.appendChild(t),this.setProgressBar(a),this.setProgressContainer(t),this.setFileSizeBox(o),i.innerHTML=""},startXHR:function(){var e=document.createElement("button");n.appendChild(e),e.className="btn btn-sm btn-info",e.innerHTML="Cancel",this.setAbortBtn(e,!0)},onComplete:function(e,t){return t?(t.success===!0?(r(t.file),addItem()):(i.innerHTML=t.msg?t.msg:"Unable to upload file",complete(!0)),void 0):(i.innerHTML="Unable to upload file",complete(!0),void 0)}})},addItem:addItem,desc:n,itemList:exams.examList,remove:remove,Send:Send}});
define('viewmodels/files',['require'],function(e){return this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.fileList=ko.observableArray(),this.getData=function(){$.ajax({type:"GET",url:"./Server/file/get.php?d="+Date.now(),headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))}}).done(function(e){fileList(e)}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},{compositionComplete:function(){getData()},activate:function(){},fileList:fileList,getData:getData}});
define('viewmodels/filesmanager',['require'],function(e){this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.displayService=e("services/displayService"),this.files=e("viewmodels/files");var t,r=ko.observable(""),n=ko.observable("");return this.remove=function(e){confirm("You are about to delete this file. Are you sure?")&&$.ajax({type:"POST",url:"./Server/file/delete.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{file:e}}).done(function(e){displayService.display(e),files.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},this.clearControl=function(){r(""),n("")},this.addItem=function(){var e={newfile:{t:n,d:r}};return""===$.trim(r())?(displayService.display("חובה להכניס תיאור","error"),void 0):($.ajax({type:"POST",url:"./Server/file/add.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:e}).done(function(e){clearControl(),displayService.display(e),files.getData()}).error(function(e){clearControl(),alert(jQuery.parseJSON(e.responseText).error)}),void 0)},this.reorder=function(e){$.ajax({type:"POST",url:"./Server/reorder.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{list:utilities.getOrder(e),table:"files"}}).done(function(){files.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},this.Send=function(){""!==r()&&t.getQueueSize()>0?t.submit():(displayService.display("חובה להכניס תיאור","error"),complete(!0))},{compositionComplete:function(){files.getData(),$.placeholder.fix(),$(".sortable").sortable({placeholder:"ui-state-highlight",update:function(){reorder(".sortable tr")}}),$(".sortable").disableSelection();var e=document.getElementById("upload-btn"),r=document.getElementById("pic-progress-wrap"),i=(document.getElementById("picbox"),document.getElementById("errormsg"));t=new ss.SimpleUpload({button:e,url:"./Server/uploadHandler.php?dir=files",name:"uploadfile",multiple:!1,queue:!1,maxUploads:1,hoverClass:"btn-hover",focusClass:"active",disabledClass:"disabled",responseType:"json",autoSubmit:!1,onChange:function(e){n(e)},onSubmit:function(e){var t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");t.className="prog",o.className="size",n.className="progress progress-striped active",a.className="progress-bar progress-bar-success",n.appendChild(a),t.innerHTML='<span style="vertical-align:middle;">'+utilities.safe_tags(e)+" - </span>",t.appendChild(o),t.appendChild(n),r.appendChild(t),this.setProgressBar(a),this.setProgressContainer(t),this.setFileSizeBox(o),i.innerHTML=""},startXHR:function(){var e=document.createElement("button");r.appendChild(e),e.className="btn btn-sm btn-info",e.innerHTML="Cancel",this.setAbortBtn(e,!0)},onComplete:function(e,t){return t?(t.success===!0?(n(t.file),addItem()):(i.innerHTML=t.msg?t.msg:"Unable to upload file",complete(!0)),void 0):(i.innerHTML="Unable to upload file",complete(!0),void 0)}})},addItem:addItem,desc:r,itemList:files.fileList,remove:remove,Send:Send}});
define('viewmodels/forum',[],function(){return{}});
define('viewmodels/home',["services/cachingService","services/utilities"],function(e){var t=ko.observable(e.get("role"));return{activate:function(){t(e.get("role"))},Image:"Content/images/Ham_Radio.png",role:t}});
define('plugins/history',["durandal/system","jquery"],function(e,t){function i(e,t,i){if(i){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}var r=/^[#\/]|\s+$/g,n=/^\/+|\/+$/g,a=/msie [\w.]+/,o=/\/$/,s={interval:50,active:!1};return"undefined"!=typeof window&&(s.location=window.location,s.history=window.history),s.getHash=function(e){var t=(e||s).location.href.match(/#(.*)$/);return t?t[1]:""},s.getFragment=function(e,t){if(null==e)if(s._hasPushState||!s._wantsHashChange||t){e=s.location.pathname+s.location.search;var i=s.root.replace(o,"");e.indexOf(i)||(e=e.substr(i.length))}else e=s.getHash();return e.replace(r,"")},s.activate=function(i){s.active&&e.error("History has already been activated."),s.active=!0,s.options=e.extend({},{root:"/"},s.options,i),s.root=s.options.root,s._wantsHashChange=s.options.hashChange!==!1,s._wantsPushState=!!s.options.pushState,s._hasPushState=!!(s.options.pushState&&s.history&&s.history.pushState);var o=s.getFragment(),l=document.documentMode,c=a.exec(navigator.userAgent.toLowerCase())&&(!l||7>=l);s.root=("/"+s.root+"/").replace(n,"/"),c&&s._wantsHashChange&&(s.iframe=t('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,s.navigate(o,!1)),s._hasPushState?t(window).on("popstate",s.checkUrl):s._wantsHashChange&&"onhashchange"in window&&!c?t(window).on("hashchange",s.checkUrl):s._wantsHashChange&&(s._checkUrlInterval=setInterval(s.checkUrl,s.interval)),s.fragment=o;var d=s.location,u=d.pathname.replace(/[^\/]$/,"$&/")===s.root;if(s._wantsHashChange&&s._wantsPushState){if(!s._hasPushState&&!u)return s.fragment=s.getFragment(null,!0),s.location.replace(s.root+s.location.search+"#"+s.fragment),!0;s._hasPushState&&u&&d.hash&&(this.fragment=s.getHash().replace(r,""),this.history.replaceState({},document.title,s.root+s.fragment+d.search))}return s.options.silent?void 0:s.loadUrl()},s.deactivate=function(){t(window).off("popstate",s.checkUrl).off("hashchange",s.checkUrl),clearInterval(s._checkUrlInterval),s.active=!1},s.checkUrl=function(){var e=s.getFragment();return e===s.fragment&&s.iframe&&(e=s.getFragment(s.getHash(s.iframe))),e===s.fragment?!1:(s.iframe&&s.navigate(e,!1),s.loadUrl(),void 0)},s.loadUrl=function(e){var t=s.fragment=s.getFragment(e);return s.options.routeHandler?s.options.routeHandler(t):!1},s.navigate=function(t,r){if(!s.active)return!1;if(void 0===r?r={trigger:!0}:e.isBoolean(r)&&(r={trigger:r}),t=s.getFragment(t||""),s.fragment!==t){s.fragment=t;var n=s.root+t;if(""===t&&"/"!==n&&(n=n.slice(0,-1)),s._hasPushState)s.history[r.replace?"replaceState":"pushState"]({},document.title,n);else{if(!s._wantsHashChange)return s.location.assign(n);i(s.location,t,r.replace),s.iframe&&t!==s.getFragment(s.getHash(s.iframe))&&(r.replace||s.iframe.document.open().close(),i(s.iframe.location,t,r.replace))}return r.trigger?s.loadUrl(t):void 0}},s.navigateBack=function(){s.history.back()},s});
define('plugins/router',["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(e,t,r,n,i,a,o,s){function l(e){return e=e.replace(m,"\\$&").replace(h,"(?:$1)?").replace(g,function(e,t){return t?e:"([^/]+)"}).replace(f,"(.*?)"),new RegExp("^"+e+"$")}function c(e){var t=e.indexOf(":"),r=t>0?t-1:e.length;return e.substring(0,r)}function d(e,t){return-1!==e.indexOf(t,e.length-t.length)}function u(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var r=0,n=e.length;n>r;r++)if(e[r]!=t[r])return!1;return!0}var v,p,h=/\((.*?)\)/g,g=/(\(\?)?:\w+/g,f=/\*\w+/g,m=/[\-{}\[\]+?.,\\\^$|#\s]/g,b=/\/$/,y=function(){function i(e){return e.router&&e.router.parent==$}function s(e){_&&_.config.isActive&&_.config.isActive(e)}function h(t,r){e.log("Navigation Complete",t,r);var n=e.getModuleId(O);n&&$.trigger("router:navigation:from:"+n),O=t,s(!1),_=r,s(!0);var a=e.getModuleId(O);a&&$.trigger("router:navigation:to:"+a),i(t)||$.updateDocumentTitle(t,r),p.explicitNavigation=!1,p.navigatingBack=!1,$.trigger("router:navigation:complete",t,r,$)}function g(t,r){e.log("Navigation Cancelled"),$.activeInstruction(_),_&&$.navigate(_.fragment,!1),j(!1),p.explicitNavigation=!1,p.navigatingBack=!1,$.trigger("router:navigation:cancelled",t,r,$)}function f(t){e.log("Navigation Redirecting"),j(!1),p.explicitNavigation=!1,p.navigatingBack=!1,$.navigate(t,{trigger:!0,replace:!0})}function m(t,r,n){p.navigatingBack=!p.explicitNavigation&&O!=n.fragment,$.trigger("router:route:activating",r,n,$),t.activateItem(r,n.params).then(function(e){if(e){var a=O;if(h(r,n),i(r)){var o=n.fragment;n.queryString&&(o+="?"+n.queryString),r.router.loadUrl(o)}a==r&&($.attached(),$.compositionComplete())}else t.settings.lifecycleData&&t.settings.lifecycleData.redirect?f(t.settings.lifecycleData.redirect):g(r,n);v&&(v.resolve(),v=null)}).fail(function(t){e.error(t)})}function w(t,r,n){var i=$.guardRoute(r,n);i?i.then?i.then(function(i){i?e.isString(i)?f(i):m(t,r,n):g(r,n)}):e.isString(i)?f(i):m(t,r,n):g(r,n)}function x(e,t,r){$.guardRoute?w(e,t,r):m(e,t,r)}function S(e){return _&&_.config.moduleId==e.config.moduleId&&O&&(O.canReuseForRoute&&O.canReuseForRoute.apply(O,e.params)||!O.canReuseForRoute&&O.router&&O.router.loadUrl)}function k(){if(!j()){var t=D.shift();D=[],t&&(j(!0),$.activeInstruction(t),S(t)?x(r.create(),O,t):e.acquire(t.config.moduleId).then(function(r){var n=e.resolveObject(r);x(N,n,t)}).fail(function(r){e.error("Failed to load routed module ("+t.config.moduleId+"). Details: "+r.message)}))}}function A(e){D.unshift(e),k()}function I(e,t,r){for(var n=e.exec(t).slice(1),i=0;i<n.length;i++){var a=n[i];n[i]=a?decodeURIComponent(a):null}var o=$.parseQueryString(r);return o&&n.push(o),{params:n,queryParams:o}}function C(t){$.trigger("router:route:before-config",t,$),e.isRegExp(t)?t.routePattern=t.route:(t.title=t.title||$.convertRouteToTitle(t.route),t.moduleId=t.moduleId||$.convertRouteToModuleId(t.route),t.hash=t.hash||$.convertRouteToHash(t.route),t.routePattern=l(t.route)),t.isActive=t.isActive||o.observable(!1),$.trigger("router:route:after-config",t,$),$.routes.push(t),$.route(t.routePattern,function(e,r){var n=I(t.routePattern,e,r);A({fragment:e,queryString:r,config:t,params:n.params,queryParams:n.queryParams})})}function T(t){if(e.isArray(t.route))for(var r=t.isActive||o.observable(!1),n=0,i=t.route.length;i>n;n++){var a=e.extend({},t);a.route=t.route[n],a.isActive=r,n>0&&delete a.nav,C(a)}else C(t);return $}var O,_,D=[],j=o.observable(!1),N=r.create(),$={handlers:[],routes:[],navigationModel:o.observableArray([]),activeItem:N,isNavigating:o.computed(function(){var e=N(),t=j(),r=e&&e.router&&e.router!=$&&e.router.isNavigating()?!0:!1;return t||r}),activeInstruction:o.observable(null),__router__:!0};return n.includeIn($),N.settings.areSameItem=function(e,t,r,n){return e==t?u(r,n):!1},$.parseQueryString=function(e){var t,r;if(!e)return null;if(r=e.split("&"),0==r.length)return null;t={};for(var n=0;n<r.length;n++){var i=r[n];if(""!==i){var a=i.split("=");t[a[0]]=a[1]&&decodeURIComponent(a[1].replace(/\+/g," "))}}return t},$.route=function(e,t){$.handlers.push({routePattern:e,callback:t})},$.loadUrl=function(t){var r=$.handlers,n=null,i=t,o=t.indexOf("?");if(-1!=o&&(i=t.substring(0,o),n=t.substr(o+1)),$.relativeToParentRouter){var s=this.parent.activeInstruction();i=s.params.join("/"),i&&"/"==i.charAt(0)&&(i=i.substr(1)),i||(i=""),i=i.replace("//","/").replace("//","/")}i=i.replace(b,"");for(var l=0;l<r.length;l++){var c=r[l];if(c.routePattern.test(i))return c.callback(i,n),!0}return e.log("Route Not Found"),$.trigger("router:route:not-found",t,$),_&&a.navigate(_.fragment,{trigger:!1,replace:!0}),p.explicitNavigation=!1,p.navigatingBack=!1,!1},$.updateDocumentTitle=function(e,r){r.config.title?document.title=t.title?r.config.title+" | "+t.title:r.config.title:t.title&&(document.title=t.title)},$.navigate=function(e,t){return e&&-1!=e.indexOf("://")?(window.location.href=e,!0):(p.explicitNavigation=!0,a.navigate(e,t))},$.navigateBack=function(){a.navigateBack()},$.attached=function(){$.trigger("router:navigation:attached",O,_,$)},$.compositionComplete=function(){j(!1),$.trigger("router:navigation:composition-complete",O,_,$),k()},$.convertRouteToHash=function(e){if($.relativeToParentRouter){var t=$.parent.activeInstruction(),r=t.config.hash+"/"+e;return a._hasPushState&&(r="/"+r),r=r.replace("//","/").replace("//","/")}return a._hasPushState?e:"#"+e},$.convertRouteToModuleId=function(e){return c(e)},$.convertRouteToTitle=function(e){var t=c(e);return t.substring(0,1).toUpperCase()+t.substring(1)},$.map=function(t,r){if(e.isArray(t)){for(var n=0;n<t.length;n++)$.map(t[n]);return $}return e.isString(t)||e.isRegExp(t)?(r?e.isString(r)&&(r={moduleId:r}):r={},r.route=t):r=t,T(r)},$.buildNavigationModel=function(t){for(var r=[],n=$.routes,i=t||100,a=0;a<n.length;a++){var o=n[a];o.nav&&(e.isNumber(o.nav)||(o.nav=++i),r.push(o))}return r.sort(function(e,t){return e.nav-t.nav}),$.navigationModel(r),$},$.mapUnknownRoutes=function(t,r){var n="*catchall",i=l(n);return $.route(i,function(o,s){var l=I(i,o,s),c={fragment:o,queryString:s,config:{route:n,routePattern:i},params:l.params,queryParams:l.queryParams};if(t)if(e.isString(t))c.config.moduleId=t,r&&a.navigate(r,{trigger:!1,replace:!0});else if(e.isFunction(t)){var d=t(c);if(d&&d.then)return d.then(function(){$.trigger("router:route:before-config",c.config,$),$.trigger("router:route:after-config",c.config,$),A(c)}),void 0}else c.config=t,c.config.route=n,c.config.routePattern=i;else c.config.moduleId=o;$.trigger("router:route:before-config",c.config,$),$.trigger("router:route:after-config",c.config,$),A(c)}),$},$.reset=function(){return _=O=void 0,$.handlers=[],$.routes=[],$.off(),delete $.options,$},$.makeRelative=function(t){return e.isString(t)&&(t={moduleId:t,route:t}),t.moduleId&&!d(t.moduleId,"/")&&(t.moduleId+="/"),t.route&&!d(t.route,"/")&&(t.route+="/"),t.fromParent&&($.relativeToParentRouter=!0),$.on("router:route:before-config").then(function(e){t.moduleId&&(e.moduleId=t.moduleId+e.moduleId),t.route&&(e.route=""===e.route?t.route.substring(0,t.route.length-1):t.route+e.route)}),$},$.createChildRouter=function(){var e=y();return e.parent=$,e},$};return p=y(),p.explicitNavigation=!1,p.navigatingBack=!1,p.targetIsThisWindow=function(e){var t=s(e.target).attr("target");return!t||t===window.name||"_self"===t||"top"===t&&window===window.top?!0:!1},p.activate=function(t){return e.defer(function(r){if(v=r,p.options=e.extend({routeHandler:p.loadUrl},p.options,t),a.activate(p.options),a._hasPushState)for(var n=p.routes,i=n.length;i--;){var o=n[i];o.hash=o.hash.replace("#","")}s(document).delegate("a","click",function(e){if(a._hasPushState){if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&p.targetIsThisWindow(e)){var t=s(this).attr("href");null==t||"#"===t.charAt(0)||/^[a-z]+:/i.test(t)||(p.explicitNavigation=!0,e.preventDefault(),a.navigate(t))}}else p.explicitNavigation=!0}),a.options.silent&&v&&(v.resolve(),v=null)}).promise()},p.deactivate=function(){a.deactivate()},p.install=function(){o.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,r,n,a){var s=o.utils.unwrapObservable(t())||{};if(s.__router__)s={model:s.activeItem(),attached:s.attached,compositionComplete:s.compositionComplete,activate:!1};else{var l=o.utils.unwrapObservable(s.router||n.router)||p;s.model=l.activeItem(),s.attached=l.attached,s.compositionComplete=l.compositionComplete,s.activate=!1}i.compose(e,s,a)}},o.virtualElements.allowedBindings.router=!0},p});
define('viewmodels/login',["plugins/router","durandal/app","services/cachingService","services/utilities","services/displayService"],function(e,t,r,n){var i=ko.observable(r.get("username")),a=ko.observable(""),s=ko.observable(r.get("firstname")),o=ko.observable(r.get("lastname")),l=ko.observable(r.get("email")),c=ko.observable("1"===r.get("isAdmin")),d=ko.observable("1"===r.get("isLoggedIn")),u=ko.observable(r.get("role")),p=ko.observable(r.get("course")),v=ko.observable(!1);return this.login=function(){v(!1),$.ajax({type:"POST",url:"./Server/authenticate.php",headers:{Authorization:n.getBase64Auth(i(),a())}}).done(function(t){t.isAuthorized?(r.add("username",i()),r.add("password",a()),r.add("firstname",t.firstname),r.add("lastname",t.lastname),r.add("email",t.email),r.add("isAdmin",t.isadmin),r.add("isLoggedIn","1"),r.add("role",t.role),r.add("course",t.course),s(r.get("firstname")),o(r.get("lastname")),l(r.get("email")),c("1"===r.get("isAdmin")),d("1"===r.get("isLoggedIn")),u(r.get("role")),p(r.get("course")),a(""),e.navigate("#home")):(v(!0),a(""))}).error(function(){v(!0),a("")})},{viewAttached:function(){$.placeholder.fix()},username:i,password:a,firstname:s,lastname:o,email:l,isadmin:c,isloggedin:d,role:u,course:p,login:login,showLoginAlert:v}});
define('viewmodels/lessons',["durandal/app","services/cachingService","services/utilities","services/displayService","viewmodels/login"],function(e,t,r,n,i){return this.lessonList=ko.observableArray(),this.lessonList2=ko.observableArray(),this.lessonList3=ko.observableArray(),this.getData=function(){$.ajax({type:"GET",url:"./Server/lesson/get.php?d="+Date.now(),headers:{Authorization:r.getBase64Auth(t.get("username"),t.get("password"))}}).done(function(e){var t=Enumerable.From(e).Where(function(e){return"0"==e.s}).ToArray();lessonList(t);var r=Enumerable.From(e).Where(function(e){return"1"==e.s}).ToArray();lessonList2(r);var n=Enumerable.From(e).Where(function(e){return"2"==e.s}).ToArray();lessonList3(n),$(".fancy").click(function(){return $.fancybox({padding:0,autoScale:!1,transitionIn:"none",transitionOut:"none",title:this.title,width:1152,height:693,href:this.href.replace(new RegExp("watch\\?v=","i"),"v/"),type:"iframe"}),!1})}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},{compositionComplete:function(){getData()},activate:function(){},lessonList:lessonList,lessonList2:lessonList2,lessonList3:lessonList3,getData:getData,course:i.course,isadmin:i.isadmin}});
define('viewmodels/lessonsmanager',['require'],function(e){this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.displayService=e("services/displayService"),this.lessons=e("viewmodels/lessons");var t,r=ko.observable("0"),n=ko.observable(""),i=ko.observable("");return this.remove=function(e){confirm("You are about to delete this lesson. Are you sure?")&&$.ajax({type:"POST",url:"./Server/lesson/delete.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{lesson:e}}).done(function(e){displayService.display(e),lessons.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},this.clearControl=function(){n(""),i("")},this.addItem=function(){var e={newlesson:{t:i,d:n,s:r}};return""===$.trim(n())?(displayService.display("חובה להכניס תיאור","error"),void 0):($.ajax({type:"POST",url:"./Server/lesson/add.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:e}).done(function(e){clearControl(),displayService.display(e),lessons.getData()}).error(function(e){clearControl(),alert(jQuery.parseJSON(e.responseText).error)}),void 0)},this.reorder=function(e){$.ajax({type:"POST",url:"./Server/reorder.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{list:utilities.getOrder(e),table:"lessons"}}).done(function(){lessons.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},this.Send=function(){""!==n()&&t.getQueueSize()>0?t.submit():(displayService.display("חובה להכניס תיאור","error"),complete(!0))},{compositionComplete:function(){lessons.getData(),$.placeholder.fix(),$(".sortable1").sortable({placeholder:"ui-state-highlight",update:function(){reorder(".sortable1 tr")}}).disableSelection(),$(".sortable2").sortable({placeholder:"ui-state-highlight",update:function(){reorder(".sortable2 tr")}}).disableSelection(),$(".sortable3").sortable({placeholder:"ui-state-highlight",update:function(){reorder(".sortable3 tr")}}).disableSelection();var e=document.getElementById("upload-btn"),r=document.getElementById("pic-progress-wrap"),n=(document.getElementById("picbox"),document.getElementById("errormsg"));t=new ss.SimpleUpload({button:e,url:"./Server/uploadHandler.php?dir=lessons",name:"uploadfile",multiple:!1,queue:!1,maxUploads:1,hoverClass:"btn-hover",focusClass:"active",disabledClass:"disabled",responseType:"json",autoSubmit:!1,onChange:function(e){i(e)},onSubmit:function(e){var t=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div");t.className="prog",s.className="size",i.className="progress progress-striped active",a.className="progress-bar progress-bar-success",i.appendChild(a),t.innerHTML='<span style="vertical-align:middle;">'+utilities.safe_tags(e)+" - </span>",t.appendChild(s),t.appendChild(i),r.appendChild(t),this.setProgressBar(a),this.setProgressContainer(t),this.setFileSizeBox(s),n.innerHTML=""},startXHR:function(){var e=document.createElement("button");r.appendChild(e),e.className="btn btn-sm btn-info",e.innerHTML="Cancel",this.setAbortBtn(e,!0)},onComplete:function(e,t){return t?(t.success===!0?(i(t.file),addItem()):(n.innerHTML=t.msg?t.msg:"Unable to upload file",complete(!0)),void 0):(n.innerHTML="Unable to upload file",complete(!0),void 0)}})},addItem:addItem,desc:n,section:r,itemList:lessons.lessonList,itemList2:lessons.lessonList2,itemList3:lessons.lessonList3,remove:remove,Send:Send}});
define('viewmodels/links',['require'],function(e){return this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.linkList=ko.observableArray(),this.getData=function(){$.ajax({type:"GET",url:"./Server/link/get.php?d="+Date.now(),headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))}}).done(function(e){linkList(e)}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},{compositionComplete:function(){getData()},activate:function(){},linkList:linkList,getData:getData}});
define('viewmodels/linksmanager',['require'],function(e){this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.displayService=e("services/displayService"),this.links=e("viewmodels/links");var t=ko.observable(""),r=ko.observable("");return this.remove=function(e){confirm("You are about to delete this link. Are you sure?")&&$.ajax({type:"POST",url:"./Server/link/delete.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{link:e}}).done(function(e){displayService.display(e),links.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},this.clearControl=function(){t(""),r("")},this.addItem=function(){var e={newlink:{t:t,d:r}};return""===$.trim(t())||""===$.trim(r())?(displayService.display("חובה להכניס כתובת ותיאור","error"),void 0):($.ajax({type:"POST",url:"./Server/link/add.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:e}).done(function(e){clearControl(),displayService.display(e),links.getData(),app.trigger("audit")}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)}),void 0)},this.reorder=function(e){$.ajax({type:"POST",url:"./Server/reorder.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{list:utilities.getOrder(e),table:"links"}}).done(function(){links.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},{compositionComplete:function(){links.getData(),$.placeholder.fix(),$(".sortable").sortable({placeholder:"ui-state-highlight",update:function(){reorder(".sortable tr")}}),$(".sortable").disableSelection()},addItem:addItem,target:t,desc:r,itemList:links.linkList,remove:remove}});
define('viewmodels/presentations',['require'],function(e){this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.presentationList=ko.observableArray();var t=function(){$.ajax({type:"GET",url:"./Server/presentation/get.php?d="+Date.now(),headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))}}).done(function(e){presentationList(e),$(".fancy").click(function(){return $.fancybox({padding:0,autoScale:!1,transitionIn:"none",transitionOut:"none",title:this.title,width:1152,height:693,href:this.href.replace(new RegExp("watch\\?v=","i"),"v/"),type:"iframe"}),!1})}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})};return{compositionComplete:function(){t()},activate:function(){},presentationList:presentationList,getData:t}});
define('viewmodels/presentationsmanager',['require'],function(e){this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.displayService=e("services/displayService"),this.presentations=e("viewmodels/presentations");var t=ko.observable(""),r=ko.observable("");return this.remove=function(e){confirm("You are about to delete this presentation. Are you sure?")&&$.ajax({type:"POST",url:"./Server/presentation/delete.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{presentation:e}}).done(function(e){displayService.display(e),presentations.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},this.clearControl=function(){t(""),r("")},this.addItem=function(){var e={newpresentation:{t:t,d:r}};return""===$.trim(t())||""===$.trim(r())?(displayService.display("חובה להכניס כתובת ותיאור","error"),void 0):($.ajax({type:"POST",url:"./Server/presentation/add.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:e}).done(function(e){clearControl(),displayService.display(e),presentations.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)}),void 0)},this.reorder=function(e){$.ajax({type:"POST",url:"./Server/reorder.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{list:utilities.getOrder(e),table:"presentations"}}).done(function(){presentations.getData()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},{compositionComplete:function(){presentations.getData(),$.placeholder.fix(),$(".sortable").sortable({placeholder:"ui-state-highlight",update:function(){reorder(".sortable tr")}}).disableSelection(),$(".sortable").disableSelection()},addItem:addItem,target:t,desc:r,itemList:presentations.presentationList,remove:remove}});
define('viewmodels/shell',["plugins/router","durandal/app","services/cachingService","services/utilities","services/displayService","services/themeManager"],function(e,t,r,n,i,a){var s=ko.observable(!1),o=ko.observable(!1),l=ko.observable(""),d=ko.observable(""),c=ko.observable("user"),u=ko.computed(function(){return l()+" "+d()},this),p="Content/images/iarc_logo.gif";return this.logout=function(){s(!1),r.add("username",null),r.add("password",null),r.add("isLoggedIn",null),r.add("isAdmin",null),r.add("role",null),e.navigate("")},{router:e,logout:logout,firstName:l,lastName:d,fullName:u,isLoggedIn:s,isAdmin:o,role:c,Image:p,router:e,setTheme:a.switch_style,compositionComplete:function(){a.set_style_from_cookie()},activate:function(){return e.map([{route:"lessonsmanager",title:"ניהול שיעורים",moduleId:"viewmodels/lessonsmanager",nav:!1,visible:!1,admin:!0,restricted:!1},{route:"usersmanager",title:"ניהול משתמשים",moduleId:"viewmodels/usersmanager",nav:!1,visible:!1,admin:!0,restricted:!1},{route:"presentationsmanager",title:"ניהול מצגות",moduleId:"viewmodels/presentationsmanager",nav:!1,visible:!1,admin:!0,restricted:!1},{route:"examsmanager",title:"ניהול מבחנים",moduleId:"viewmodels/examsmanager",nav:!1,visible:!1,admin:!0,restricted:!1},{route:"linksmanager",title:"ניהול קישורים",moduleId:"viewmodels/linksmanager",nav:!1,visible:!1,admin:!0,restricted:!1},{route:"filesmanager",title:"ניהול קבצים",moduleId:"viewmodels/filesmanager",nav:!1,visible:!1,admin:!0,restricted:!1},{route:"forum",title:"פורום",moduleId:"viewmodels/forum",nav:!0,visible:!1,admin:!1,restricted:!0},{route:"files",title:"קבצים",moduleId:"viewmodels/files",nav:!0,visible:!1,admin:!1,restricted:!1},{route:"links",title:"קישורים",moduleId:"viewmodels/links",nav:!0,visible:!1,admin:!1,restricted:!1},{route:"exams",title:"מבחנים",moduleId:"viewmodels/exams",nav:!0,visible:!1,admin:!1,restricted:!0},{route:"presentations",title:"מצגות",moduleId:"viewmodels/presentations",nav:!0,visible:!1,admin:!1,restricted:!1},{route:"lessons",title:"שיעורים",moduleId:"viewmodels/lessons",nav:!0,visible:!1,admin:!1,restricted:!1},{route:"userdetails",title:"שינוי סיסמה",moduleId:"viewmodels/userdetails",nav:!1,visible:!1,admin:!1,restricted:!1},{route:"",title:"התחבר",moduleId:"viewmodels/login",nav:!1,visible:!1,admin:!1,restricted:!1},{route:"home",title:"דף הבית",moduleId:"viewmodels/home",nav:!1,visible:!1,admin:!1,restricted:!1}]).buildNavigationModel(),e.guardRoute=function(e,t){var n=r.get("isLoggedIn"),a=r.get("isAdmin");return s("1"===n),o("1"===a),c(r.get("role")),""===t.fragment?s()?"#home":(r.add("username",null),r.add("password",null),r.add("firstname",null),r.add("lastname",null),r.add("isLoggedIn",null),r.add("isAdmin",null),!0):e.admin?s()&&o()?(l(r.get("firstname")),d(r.get("lastname")),!0):s()?(o()||i.display("דף זה נגיש למשתמשים מורשים בלבד!","error"),!1):!1:e.restricted?"restricted"==c()?!1:s()?(l(r.get("firstname")),d(r.get("lastname")),!0):void 0:s()?(l(r.get("firstname")),d(r.get("lastname")),!0):!1},e.activate("")}}});
define('viewmodels/userdetails',['require'],function(e){this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.displayService=e("services/displayService"),this.login=e("viewmodels/login");var t=ko.observable(""),r=ko.observable(""),n=ko.observable("");return this.clearControl=function(){t(""),r(""),n("")},this.changePassword=function(){return""===t()||""===r()||""===n()?(displayService.display("כל השדות הם שדות חובה!","error"),void 0):t()!==cachingService.get("password")?(displayService.display("הסיסמה הישנה לא נכונה!","error"),void 0):r()!=n()?(displayService.display("הסיסמה החדשה וסיסמת האימות לא זהות!","error"),void 0):($.ajax({type:"POST",url:"./Server/user/changepass.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{authorization:utilities.encode64(login.username+":"+t+":"+r)}}).done(function(e){clearControl(),displayService.display(e)}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)}),void 0)},{oldpw:t,newpw:r,newpw2:n,viewAttached:function(){$.placeholder.fix()},changePassword:changePassword,username:login.username,firstname:login.firstname,lastname:login.lastname,email:login.email}});
define('viewmodels/usersmanager',['require'],function(e){this.app=e("durandal/app"),this.cachingService=e("services/cachingService"),this.utilities=e("services/utilities"),this.displayService=e("services/displayService"),this.enums=e("services/enums"),this.itemList=ko.observableArray();var t=ko.observable(""),r=ko.observable(""),n=ko.observable(""),i=ko.observable(""),a=ko.observable(""),s=ko.observable(""),o=ko.observable(""),l=ko.observable(!1),d=ko.observable(2),c=ko.computed(function(){return l()?"restricted":"user"}),u=function(){$.ajax({type:"GET",url:"./Server/user/get.php?d="+Date.now(),headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))}}).done(function(e){itemList(e)}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})};return this.remove=function(e){confirm("You are about to delete this user. Are you sure?")&&$.ajax({type:"POST",url:"./Server/user/delete.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:{user:e}}).done(function(e){displayService.display(e),u()}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)})},this.clearControl=function(){t(""),r(""),n(""),i(""),a(""),s(""),o("")},this.addItem=function(){var e={newuser:{un:t,pw:r,fn:i,ln:a,em:s,role:c,course:d}};return""===$.trim(t())||""===$.trim(r())||""===$.trim(n())||""===$.trim(i())||""===$.trim(a())||""===$.trim(s())?(displayService.display("כל השדות הם שדות חובה!","error"),void 0):r()!==n()?(displayService.display("הסיסמה וסיסמת האימות לא זהות!","error"),void 0):($.ajax({type:"POST",url:"./Server/user/add.php",headers:{Authorization:utilities.getBase64Auth(cachingService.get("username"),cachingService.get("password"))},data:e}).done(function(e){e.status==enums.Status.OK?(clearControl(),displayService.display(e.msg),u()):displayService.display(e.msg,"error")}).error(function(e){alert(jQuery.parseJSON(e.responseText).error)}),void 0)},{un:t,pw:r,pw2:n,fn:i,ln:a,em:s,ad:o,role:l,course:d,getData:u,compositionComplete:function(){u(),$("table.sortable").shamirSortable(itemList),$.placeholder.fix()},addItem:addItem,itemList:itemList,remove:remove}});
define('text',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});

define('text!views/exams.html',[],function () { return '<div class="text-right">\n    <div class="row">\n        <div class="col-md-12">\n            <div class="panel panel-blue margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">מבחנים</h4>\n                </div>\n                <table class="table table-striped table-condensed" style="direction: rtl">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th class="text-right">בחינה בנושא</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: examList">\n                        <tr>\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-primary"></label>\n                            </td>\n                            <td><a target="_blank" data-bind="attr: { \'href\': \'/lessons/Content/files/\' + t }" style="text-decoration: none; cursor: pointer"><span data-bind="    html: d"></span></a></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n';});


define('text!views/examsmanager.html',[],function () { return '<div class="text-right" style="direction: rtl">\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h2><span class="label label-info">ניהול מבחנים</span></h2>\n        </div>\n    </div>\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h4>הוסף מבחן חדש</h4>\n        </div>\n    </div>\n\n    <!--<div class="row margin-bottom-20">\n        <div class="col-md-2">\n            <span style="z-index: 99999; position: absolute; left: 0">\n                <input id="fileToUpload" type="file" name="fileToUpload" data-bind="event: { change: submit }" style="opacity: 0; width: 95px">\n            </span>\n            <span>\n                <button id="uploadBtn" class="btn btn-info fileinput-button pull-left">\n                    <span class="icon-file icon-white"></span>\n                    <span>בחר קובץ</span>\n                </button>\n            </span>\n        </div>\n        <div class="col-md-10">\n            <input class="form-control text-right" placeholder="תיאור" name="description" type="text" data-bind="value: desc">\n        </div>\n    </div>-->\n\n    <!--******************************************************************-->\n    <div class="col-md-1">\n        <button type="button" class="btn btn-success pull-left" data-bind="click: Send">שמור</button>\n    </div>\n    <div class="col-md-2">\n        <input type="button" id="upload-btn" class="btn btn-primary btn-large clearfix" value="בחר קובץ">\n    </div>\n    <div class="col-md-9">\n        <input class="form-control text-right" placeholder="תיאור" name="description" type="text" data-bind="value: desc">\n    </div>\n    <div class="content-box">\n        <div class="clear">\n            <div id="errormsg" class="clearfix redtext">\n            </div>\n            <div id="pic-progress-wrap" class="progress-wrap" style="margin-top: 10px; margin-bottom: 10px;">\n            </div>\n\n            <div id="picbox" class="clear" style="padding-top: 0px; padding-bottom: 10px;">\n            </div>\n\n        </div>\n    </div>\n    <!--******************************************************************-->\n    <div class="row margin-bottom-40" style="direction: rtl">\n        <div class="col-md-12">\n            <div class="panel panel-blue margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">מבחנים</h4>\n                </div>\n                <table class="table table-striped table-condensed">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th style="width: 20px;" class="text-right">מחק</th>\n                            <th class="text-right">תיאור</th>\n                        </tr>\n                    </thead>\n                    <tbody class="sortable" data-bind="foreach: itemList">\n                        <tr data-bind="attr: { \'id\': id }" style="cursor: move">\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-info"></label>\n                            </td>\n                            <td><a style="text-decoration: none; cursor: pointer" class="icon-trash" data-bind="click: remove"></a></td>\n                            <td><span data-bind="html: d"></span></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>';});


define('text!views/files.html',[],function () { return '<div class="text-right">\n    <div class="row">\n        <div class="col-md-12">\n            <div class="panel panel-black margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">קבצים</h4>\n                </div>\n                <table class="table table-striped table-condensed" style="direction: rtl">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th class="text-right">קובץ בנושא</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: fileList">\n                        <tr>\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-inverse"></label>\n                            </td>\n                            <td><a target="_blank" data-fancybox-type="iframe" data-bind="attr: { \'href\': \'/lessons/Content/files/\' + t }" style="text-decoration: none; cursor: pointer"><span data-bind="    html: d"></span></a></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n';});


define('text!views/filesmanager.html',[],function () { return '<div class="text-right" style="direction: rtl">\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h2><span class="label label-inverse">ניהול קבצים</span></h2>\n        </div>\n    </div>\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h4>הוסף קובץ חדש</h4>\n        </div>\n    </div>\n\n    <!--<div class="row margin-bottom-20">\n        <div class="col-md-2">\n            <span style="z-index: 99999; position: absolute; left: 0">\n                <input id="fileToUpload" type="file" name="fileToUpload" data-bind="event: { change: submit }" style="opacity: 0; width: 95px">\n            </span>\n            <span>\n                <button id="uploadBtn" class="btn btn-inverse fileinput-button pull-left">\n                    <span class="icon-file icon-white"></span>\n                    <span>בחר קובץ</span>\n                </button>\n            </span>\n        </div>\n        <div class="col-md-10">\n            <input class="form-control text-right" placeholder="תיאור" name="description" type="text" data-bind="value: desc">\n        </div>\n    </div>-->\n\n    <!--******************************************************************-->\n    <div class="col-md-1">\n        <button type="button" class="btn btn-success pull-left" data-bind="click: Send">שמור</button>\n    </div>\n    <div class="col-md-2">\n        <input type="button" id="upload-btn" class="btn btn-primary btn-large clearfix" value="בחר קובץ">\n    </div>\n    <div class="col-md-9">\n        <input class="form-control text-right" placeholder="תיאור" name="description" type="text" data-bind="value: desc">\n    </div>\n    <div class="content-box">\n        <div class="clear">\n            <div id="errormsg" class="clearfix redtext">\n            </div>\n            <div id="pic-progress-wrap" class="progress-wrap" style="margin-top: 10px; margin-bottom: 10px;">\n            </div>\n\n            <div id="picbox" class="clear" style="padding-top: 0px; padding-bottom: 10px;">\n            </div>\n\n        </div>\n    </div>\n    <!--******************************************************************-->\n\n    <div class="row margin-bottom-40" style="direction: rtl">\n        <div class="col-md-12">\n            <div class="panel panel-black margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">קבצים</h4>\n                </div>\n                <table class="table table-striped table-condensed">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th style="width: 20px;" class="text-right">מחק</th>\n                            <th class="text-right">תיאור</th>\n                        </tr>\n                    </thead>\n                    <tbody class="sortable" data-bind="foreach: itemList">\n                        <tr data-bind="attr: { \'id\': id }" style="cursor: move">\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-inverse"></label>\n                            </td>\n                            <td><a style="text-decoration: none; cursor: pointer" class="icon-trash" data-bind="click: remove"></a></td>\n                            <td><span data-bind="html: d"></span></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n';});


define('text!views/forum.html',[],function () { return '<div style="direction: rtl"><iframe src="./phpBB3/index.php" height="750" width="100%" frameborder="0"></iframe></div>';});


define('text!views/home.html',[],function () { return '<div class="text-right">\n    <h1>ברוכים הבאים לקורס חובבי רדיו מתוקשב</h1>\n    <div class="pull-right">\n        <!--<div class="pull-right">\n            <div class="span5">\n                <h3><i class="icon icon-ok"></i>&nbsp;שיעורים</h3>\n                <a href="#lessons"><h4>כאן תוכלו למצוא את כל החומר מחולק לשיעורים</h4></a>\n            </div>\n        </div>\n        <div style="clear: both"></div>-->\n        <div class="pull-right">\n            <div class="span5">\n                <h3><i class="icon icon-facetime-video"></i>&nbsp;שיעורים</h3>\n                <a href="#lessons"><h4>כאן תוכלו למצוא את כל השיעורים</h4></a>\n            </div>\n        </div>\n        <div style="clear: both"></div>\n        <div class="pull-right">\n            <div class="span5">\n                <h3><i class="icon icon-film"></i>&nbsp;מצגות</h3>\n                <a href="#presentations"><h4>כאן תוכלו למצוא מצגות בנושאים שונים </h4></a>\n            </div>\n        </div>\n        <div style="clear: both"></div>\n        <div class="pull-right" data-bind="visible: role() != \'restricted\'">\n            <div class="span5">\n                <h3><i class="icon icon-pencil"></i>&nbsp;מבחנים</h3>\n                <a href="#exams"><h4>כאן תוכלו למצוא שאלות ממבחנים </h4></a>\n            </div>\n        </div>\n    </div>\n    <div class="pull-right">\n        \n        <div class="pull-right">\n            <div class="span5">\n                <h3><i class="icon icon-share"></i>&nbsp;קישורים</h3>\n                <a href="#links"><h4>כאן תוכלו למצוא קישורים לאתרים בתחום</h4></a>\n            </div>\n        </div>\n        <div style="clear: both"></div>\n        <div class="pull-right">\n            <div class="span5">\n                <h3><i class="icon icon-file"></i>&nbsp;קבצים</h3>\n                <a href="#files"><h4>כאן תוכלו למצוא קבצים להורדה</h4></a>\n            </div>\n        </div>\n        <div style="clear: both"></div>\n        <div class="pull-right" data-bind="visible: role() != \'restricted\'">\n            <div class="span5">\n                <h3><i class="icon icon-user"></i>&nbsp;פורום</h3>\n                <a href="#forum"><h4>כאן תוכלו לשאול שאלות ולהתעדכן בהודעות</h4></a>\n            </div>\n        </div>\n        \n    </div>\n\n    <div style="clear: both"></div>\n    <div style="margin-top: 20px; margin-left: 100px; margin-right: auto">\n        <img data-bind="attr: { src: Image }" alt="" width="700px" style="width:700px;"/>\n    </div>\n</div>\n';});


define('text!views/lessons.html',[],function () { return '<div class="text-right">\n    <!--<i id="loadingImage" class="icon-spinner icon-2x icon-spin pull-right centered"></i>-->\n    <div class="row" data-bind="visible: (course() == \'2\' || isadmin())">\n        <!--<div class="col-md-6">\n            <div class="panel panel-red margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">טכני</h4>\n                </div>\n                <table class="table table-striped table-condensed" style="direction: rtl">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th class="text-right">נושא השיעור</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: lessonList2">\n                        <tr>\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-danger"></label>\n                            </td>\n                            <td><a target="_blank" data-bind="attr: { \'href\': \'/lessons/Content/files/\' + t }" style="text-decoration: none; cursor: pointer"><span data-bind="    html: d"></span></a></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>-->\n        <div class="col-md-12">\n            <div class="panel panel-red margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">קורס נהלים וטכני לדרגה ב-ד</h4>\n                </div>\n                <table class="table table-striped table-condensed" style="direction: rtl">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th class="text-right">נושא השיעור</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: lessonList">\n                        <tr>\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-danger"></label>\n                            </td>\n                            <td><a target="_blank" data-bind="attr: { \'href\': \'/lessons/Content/files/\' + t }" style="text-decoration: none; cursor: pointer"><span data-bind="    html: d"></span></a></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n    <div class="row" data-bind="visible: (course() == \'1\' || isadmin())">\n        <div class="col-md-12">\n            <div class="panel panel-red margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">דרגה א</h4>\n                </div>\n                <table class="table table-striped table-condensed" style="direction: rtl">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th class="text-right">נושא השיעור</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: lessonList3">\n                        <tr>\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-danger"></label>\n                            </td>\n                            <td><a target="_blank" data-bind="attr: { \'href\': \'/lessons/Content/files/\' + t }" style="text-decoration: none; cursor: pointer"><span data-bind="    html: d"></span></a></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n\n';});


define('text!views/lessonsmanager.html',[],function () { return '<div class="text-right" style="direction: rtl">\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h2><span class="label label-danger">ניהול שיעורים</span></h2>\n        </div>\n    </div>\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h4>הוסף שיעור חדש</h4>\n        </div>\n    </div>\n\n    <!--<div class="row margin-bottom-20">\n        <div class="col-md-2">\n            <span style="z-index: 99999; position: absolute; left: 0">\n                <input id="fileToUpload" type="file" name="fileToUpload" data-bind="event: { change: submit }" style="opacity: 0; width: 95px">\n            </span>\n            <span>\n                <button id="uploadBtn" class="btn btn-danger fileinput-button pull-left">\n                    <span class="icon-file icon-white"></span>\n                    <span>בחר קובץ</span>\n                </button>\n            </span>\n        </div>\n        <div class="col-md-4">\n            <label class="radio-inline">\n                דרגה ב-ד<input type="radio" value="0" name="section" data-bind="checked: section" />\n            </label>\n            <label class="radio-inline">\n                דרגה א<input type="radio" value="2" name="section" data-bind="checked: section" />\n            </label>\n        </div>\n        <div class="col-md-6">\n            <input class="form-control text-right" placeholder="תיאור" name="description" type="text" data-bind="value: desc">\n        </div>\n    </div>-->\n    <!--******************************************************************-->\n    <div class="row margin-bottom-10">\n        <div class="col-md-12 text-right">\n            <label class="radio-inline">\n                דרגה ב-ד<input type="radio" value="0" name="section" data-bind="checked: section" />\n            </label>\n            <label class="radio-inline">\n                דרגה א<input type="radio" value="2" name="section" data-bind="checked: section" />\n            </label>\n        </div>\n    </div>\n    <div class="row margin-bottom-10">\n        <div class="col-md-1">\n            <button type="button" class="btn btn-success pull-left" data-bind="click: Send">שמור</button>\n        </div>\n        <div class="col-md-2">\n            <input type="button" id="upload-btn" class="btn btn-primary btn-large clearfix" value="בחר קובץ">\n        </div>\n        <div class="col-md-9">\n            <input class="form-control text-right" placeholder="תיאור" name="description" type="text" data-bind="value: desc">\n        </div>\n        <div class="content-box">\n            <div class="clear">\n                <div id="errormsg" class="clearfix redtext">\n                </div>\n                <div id="pic-progress-wrap" class="progress-wrap" style="margin-top: 10px; margin-bottom: 10px;">\n                </div>\n\n                <div id="picbox" class="clear" style="padding-top: 0px; padding-bottom: 10px;">\n                </div>\n\n            </div>\n        </div>\n    </div>\n    <!--******************************************************************-->\n    <div class="row margin-bottom-40" style="direction: rtl">\n        <div class="col-md-6">\n            <div class="panel panel-red margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">דרגה א</h4>\n                </div>\n                <table class="table table-striped table-condensed">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th style="width: 20px;" class="text-right">מחק</th>\n                            <th class="text-right">תיאור</th>\n                        </tr>\n                    </thead>\n                    <tbody class="sortable3" data-bind="foreach: itemList3">\n                        <tr data-bind="attr: { \'id\': id }" style="cursor: move">\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-danger"></label>\n                            </td>\n                            <td><a style="text-decoration: none; cursor: pointer" class="icon-trash" data-bind="click: remove"></a></td>\n                            <td><span data-bind="html: d"></span></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div class="col-md-6">\n            <div class="panel panel-red margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">דרגה ב-ד: נוהל + טכני</h4>\n                </div>\n                <table class="table table-striped table-condensed">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th style="width: 20px;" class="text-right">מחק</th>\n                            <th class="text-right">תיאור</th>\n                        </tr>\n                    </thead>\n                    <tbody class="sortable2" data-bind="foreach: itemList">\n                        <tr data-bind="attr: { \'id\': id }" style="cursor: move">\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-danger"></label>\n                            </td>\n                            <td><a style="text-decoration: none; cursor: pointer" class="icon-trash" data-bind="click: remove"></a></td>\n                            <td><span data-bind="html: d"></span></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n';});


define('text!views/links.html',[],function () { return '<div class="text-right">\n    <div class="row">\n        <div class="col-md-12">\n            <div class="panel panel-green margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">קישורים חיצוניים</h4>\n                </div>\n                <table class="table table-striped table-condensed" style="direction: rtl">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th class="text-right">קישור ל</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: linkList">\n                        <tr>\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-success"></label>\n                            </td>\n                            <td><a target="_blank" data-fancybox-type="iframe" data-bind="attr: { \'href\': t }" style="text-decoration: none; cursor: pointer"><span data-bind="    html: d"></span></a></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n\n';});


define('text!views/linksmanager.html',[],function () { return '<div class="text-right" style="direction: rtl">\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h2><span class="label label-success">ניהול קישורים</span></h2>\n        </div>\n    </div>\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h4>הוסף קישור חדש</h4>\n        </div>\n    </div>\n\n    <div class="row margin-bottom-20">\n        <div class="col-md-2">\n            <a data-bind="click: addItem" class="btn btn-success"><span class="glyphicon glyphicon-hdd"></span>שמור</a>\n        </div>\n        <div class="col-md-5">\n            <input class="form-control text-right" placeholder="תיאור" name="description" type="text" data-bind="value: desc">\n        </div>\n        <div class="col-md-5">\n            <input class="form-control text-right" placeholder="כתובת" name="target" type="text" data-bind="value: target">\n        </div>\n    </div>\n\n    <div class="row margin-bottom-40" style="direction: rtl">\n        <div class="col-md-12">\n            <div class="panel panel-green margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">קישורים</h4>\n                </div>\n                <table class="table table-striped table-condensed">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th style="width: 20px;" class="text-right">מחק</th>\n                            <th class="text-right">תיאור</th>\n                        </tr>\n                    </thead>\n                    <tbody class="sortable" data-bind="foreach: itemList">\n                        <tr data-bind="attr: { \'id\': id }" style="cursor: move">\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-success"></label>\n                            </td>\n                            <td><a style="text-decoration: none; cursor: pointer" class="icon-trash" data-bind="click: remove"></a></td>\n                            <td><span data-bind="html: d"></span></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n';});


define('text!views/login.html',[],function () { return '<div class="row" style="direction: rtl">\n    <div class="col-md-4 col-md-offset-4">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <h4>שלום, נא הכנס שם וסיסמה</h4>\n            </div>\n            <div class="panel-body">\n                <form accept-charset="UTF-8" role="form">\n                    <fieldset>\n                        <div class="form-group">\n                            <input class="form-control" placeholder="שם משתמש" name="username" type="text" data-bind="value: username">\n                        </div>\n                        <div class="form-group">\n                            <input class="form-control" placeholder="סיסמה" name="password" type="password" data-bind="value: password">\n                        </div>\n                        <input class="btn btn-lg btn-success btn-block" type="submit" value="הכנס" data-bind="click: login">\n                    </fieldset>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>\n';});


define('text!views/presentations.html',[],function () { return '<div class="text-right">\n    <div class="row">\n        <div class="col-md-12">\n            <div class="panel panel-orange margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">מצגות</h4>\n                </div>\n                <table class="table table-striped table-condensed" style="direction:rtl">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th class="text-right">נושא המצגת</th>\n                        </tr>\n                    </thead>\n                    <tbody data-bind="foreach: presentationList">\n                        <tr>\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-warning"></label>\n                            </td>\n                            <td><a class="fancy" data-fancybox-type="iframe" data-bind="attr: { \'href\': t, \'title\': d }" style="text-decoration: none; cursor: pointer"><span data-bind="    html: d"></span></a></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n';});


define('text!views/presentationsmanager.html',[],function () { return '<div class="text-right" style="direction: rtl">\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h2><span class="label label-warning">ניהול מצגות</span></h2>\n        </div>\n    </div>\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h4>הוסף מצגת חדשה</h4>\n        </div>\n    </div>\n\n    <div class="row margin-bottom-20">\n        <div class="col-md-2">\n            <a data-bind="click: addItem" class="btn btn-warning"><span class="glyphicon glyphicon-hdd"></span>שמור</a>\n        </div>\n        <div class="col-md-5">\n            <input class="form-control text-right" placeholder="תיאור" name="description" type="text" data-bind="value: desc">\n        </div>\n        <div class="col-md-5">\n            <input class="form-control text-right" placeholder="כתובת" name="target" type="text" data-bind="value: target">\n        </div>\n    </div>\n\n    <div class="row margin-bottom-40" style="direction: rtl">\n        <div class="col-md-12">\n            <div class="panel panel-orange margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">מצגות</h4>\n                </div>\n                <table class="table table-striped table-condensed">\n                    <thead>\n                        <tr>\n                            <th style="width: 20px;">&nbsp</th>\n                            <th style="width: 20px;" class="text-right">מחק</th>\n                            <th class="text-right">תיאור</th>\n                        </tr>\n                    </thead>\n                    <tbody class="sortable" data-bind="foreach: itemList">\n                        <tr data-bind="attr: { \'id\': id }" style="cursor: move">\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge badge-warning"></label>\n                            </td>\n                            <td><a style="text-decoration: none; cursor: pointer" class="icon-trash" data-bind="click: remove"></a></td>\n                            <td><span data-bind="html: d"></span></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n';});


define('text!views/shell.html',[],function () { return '<nav class="navbar navbar-default navbar-fixed-top" role="navigation">\n    <div class="navbar-header">\n        <a target="_blank" data-bind="attr: { href: \'http://www.iarc.org/iarc/he/\' }">\n            <img data-bind="attr: { src: Image }" alt="" alt="iarc" width="48px" height="48px" style="width: 48px; height: 48px;" />\n        </a>\n    </div>\n    <div class="collapse navbar-collapse">\n        <ul class="nav navbar-nav">\n            <li class="dropdown">\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span data-bind="text: (isLoggedIn()) ? fullName() : \'ברוכים הבאים\'"></span><b class="caret"></b></a>\n                <ul class="dropdown-menu text-right">\n                    <li><a href="#userdetails" data-bind="visible: isLoggedIn()">פרטי משתמש&nbsp;&nbsp;<i class="icon-cog"></i></a></li>\n                    <li class="divider" data-bind="visible: isLoggedIn()"></li>\n                    <li class="padding-5">צריכת אנרגיה</li>\n                    <li><a data-bind="click: function () { setTheme(\'dark\'); }">QRP&nbsp;&nbsp;<i class="icon-globe"></i></a></li>\n                    <li><a data-bind="click: function () { setTheme(\'original\'); }">QRO&nbsp;&nbsp;<i class="icon-certificate"></i></a></li>\n                    <li class="divider"></li>\n                    <li><a data-bind="click: logout"><span data-bind="    text: (isLoggedIn()) ? \'התנתק\' : \'התחבר\'"></span>&nbsp;&nbsp;<i class="icon-off"></i></a></li>\n                </ul>\n            </li>\n            <li class="dropdown" data-bind="visible: isAdmin() ">\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span data-bind="text: \'תפריט ניהול\'"></span><b class="caret"></b></a>\n                <ul class="dropdown-menu text-right">\n                    <li><a href="#lessonsmanager">ניהול שיעורים&nbsp;&nbsp;<i class="icon-facetime-video"></i></a></li>\n                    <li><a href="#presentationsmanager">ניהול מצגות&nbsp;&nbsp;<i class="icon-film"></i></a></li>\n                    <li><a href="#examsmanager">ניהול מבחנים&nbsp;&nbsp;<i class="icon-pencil"></i></a></li>\n                    <li><a href="#linksmanager">ניהול קישורים&nbsp;&nbsp;<i class="icon-share"></i></a></li>\n                    <li><a href="#filesmanager">ניהול קבצים&nbsp;&nbsp;<i class="icon-file"></i></a></li>\n                    <li><a href="#usersmanager">ניהול משתמשים&nbsp;&nbsp;<i class="icon-user"></i></a></li>\n                </ul>\n            </li>\n        </ul>\n        <ul class="nav navbar-nav pull-right">\n            <li class="pull-right"><a data-bind="attr: { href: \'#home\' }">\n                <span>&nbsp;</span>\n                <span title="קורס רדיו מתוקשב">קורס רדיו מתוקשב</span>\n                <i class="icon-signal"></i>\n            </a></li>\n        </ul>\n        <ul class="nav navbar-nav pull-right" data-bind="foreach: router.navigationModel, visible: isLoggedIn">\n            <li data-bind="css: { active: isActive }, visible: !(restricted && $parent.role() == \'restricted\')">\n                <a data-bind="    attr: { href: hash }, html: title"></a>\n            </li>\n        </ul>\n        \n    </div>\n</nav>\n<div class="container-fluid page-host" data-bind="router: { transition: \'entrance\', cacheViews: true }"></div>\n';});


define('text!views/userdetails.html',[],function () { return '<div class="text-right" style="direction: rtl">\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h2><span class="label label-user">פרטי משתמש</span></h2>\n        </div>\n    </div>\n\n     <div class="row margin-bottom-20">\n         <div class="col-md-12">\n             <div class="panel panel-user text-right">\n                 <div class="panel-heading">\n                     <h4 class="panel-title text-right">פרטי משתמש</h4>\n                 </div>\n                 <table class="table table-striped table-condensed">\n                     <thead>\n                         <tr>\n                             <th style="text-align:right">שם משתמש</th>\n                             <th style="text-align:right">שם פרטי</th>\n                             <th style="text-align:right">שם משפחה</th>\n                             <th style="text-align:right">כתובת מייל</th>\n                         </tr>\n                     </thead>\n                     <tbody>\n                         <tr>\n                             <td><span data-bind="html: username"></span></td>\n                             <td><span data-bind="html: firstname"></span></td>\n                             <td><span data-bind="html: lastname"></span></td>\n                             <td><span data-bind="html: email"></span></td>\n                         </tr>\n                     </tbody>\n                 </table>\n             </div>\n         </div>\n     </div>\n\n    <div class="row margin-bottom-20">\n        <div class="col-md-6 pull-right">\n            <input class="form-control text-right" data-bind="value: oldpw" placeholder="סיסמה ישנה" type="text" />\n            <div style="clear: both; height: 10px"></div>\n            <input class="form-control text-right" data-bind="value: newpw" placeholder="סיסמה חדשה" type="text" />\n            <div style="clear: both; height: 10px"></div>\n            <input class="form-control text-right" data-bind="value: newpw2" placeholder="אימות סיסמה חדשה" type="text" />\n            <div style="clear: both; height: 10px"></div>\n            <a data-bind="click: changePassword" class="btn btn-user"><span class="glyphicon glyphicon-hdd"></span> שמור</a>\n        </div>\n    </div>\n</div>';});


define('text!views/usersmanager.html',[],function () { return '<div class="text-right" style="direction: rtl">\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h2><span class="label label-user">ניהול משתמשים</span></h2>\n        </div>\n    </div>\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-12">\n            <h4>הוסף משתמש חדש</h4>\n        </div>\n    </div>\n\n    <div class="row margin-bottom-10">\n        <div class="col-md-3">\n            <a data-bind="click: clearControl" class="btn btn-user"><span class="glyphicon glyphicon-refresh"></span> נקה</a>\n        </div>\n        <div class="col-md-3">\n            <input class="form-control text-right" data-bind="value: pw2" placeholder="אימות סיסמה" type="password" tabindex="3" />\n        </div>\n        <div class="col-md-3">\n            <input class="form-control text-right" data-bind="value: pw" placeholder="סיסמה" type="password" tabindex="2" />\n        </div>\n        <div class="col-md-3">\n            <input class="form-control text-right" data-bind="value: un" placeholder="שם משתמש" type="text" tabindex="1" />\n        </div>\n    </div>\n\n    <div class="row margin-bottom-10" style="direction: rtl">\n        <div class="col-md-3">\n            <a data-bind="click: addItem" class="btn btn-user"><span class="glyphicon glyphicon-hdd"></span> שמור</a>\n        </div>\n        <div class="col-md-3">\n            <input class="form-control text-right" data-bind="value: em" placeholder="כתובת מייל" type="text" tabindex="6" />\n        </div>\n        <div class="col-md-3">\n            <input class="form-control text-right" data-bind="value: ln" placeholder="שם משפחה" type="text" tabindex="5" />\n        </div>\n        <div class="col-md-3">\n            <input class="form-control text-right" data-bind="value: fn" placeholder="שם פרטי" type="text" tabindex="4" />\n        </div>\n    </div>\n\n    \n    <div class="row margin-bottom-10">    \n        <div class="col-md-3 pull-right">\n            <label class="control-label">קורס:</label>\n            <label class="radio-inline" style="margin: 0 15px 0 30px">\n                <input data-bind="checked: course" type="radio" name="course" value="1" />א\n            </label>\n            <label class="radio-inline">\n                <input data-bind="checked: course" type="radio" name="course" value="2" />ב-ד\n            </label>\n        </div>\n        <div class="col-md-2 pull-right">\n            <label class="checkbox-inline">\n                <input data-bind="value: role" type="checkbox" />משתמש מוגבל\n            </label>\n        </div>\n    </div>\n\n\n    <div class="row margin-bottom-40">\n        <div class="col-md-12">\n            <div class="panel panel-user margin-bottom-40 text-right">\n                <div class="panel-heading">\n                    <h4 class="panel-title text-right">רשימת משתמשים</h4>\n                </div>\n                <table class="table table-striped table-condensed sortable">\n                    <thead>\n                        <tr>\n                            <th class="text-right" data-unsortable>מחק</th>\n                            <th class="text-right" data-unsortable>&nbsp;</th>\n                            <th class="text-right" data-source="username">שם משתמש</th>\n                            <th class="text-right" data-source="firstname">שם פרטי</th>\n                            <th class="text-right" data-source="lastname">שם משפחה</th>\n                            <th class="text-right" data-source="email">כתובת מייל</th>\n                            <th class="text-right" data-source="lastlogin">חיבור אחרון</th>\n                            <th class="text-right" data-source="course">קורס</th>\n                        </tr>\n                    </thead>\n                    <tbody class="sortable1" data-bind="foreach: itemList">\n                        <tr>\n                            <td ><a style="text-decoration: none; cursor: pointer" class="icon-trash" data-bind="click: remove"></a></td>\n                            <td>\n                                <label data-bind="text: ($index() + 1)" class="badge label-user"></label>\n                            </td>\n                            <td><span data-bind="html: username"></span></td>\n                            <td><span data-bind="html: firstname"></span></td>\n                            <td><span data-bind="html: lastname"></span></td>\n                            <td><span data-bind="html: email"></span></td>\n                            <td><span data-bind="html: lastlogin"></span></td>\n                            <td><span data-bind="html: (course == \'2\')?\'ב-ד\':\'א\'"></span></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>';});

define('plugins/dialog',["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(e,t,i,r,n,a,o){function s(t){return e.defer(function(i){e.isString(t)?e.acquire(t).then(function(t){i.resolve(e.resolveObject(t))}).fail(function(i){e.error("Failed to load dialog module ("+t+"). Details: "+i.message)}):i.resolve(t)}).promise()}var l,c={},d=0,u=function(e,t,i){this.message=e,this.title=t||u.defaultTitle,this.options=i||u.defaultOptions};return u.prototype.selectOption=function(e){l.close(this,e)},u.prototype.getView=function(){return n.processMarkup(u.defaultViewMarkup)},u.setViewUrl=function(e){delete u.prototype.getView,u.prototype.viewUrl=e},u.defaultTitle=t.title||"Application",u.defaultOptions=["Ok"],u.defaultViewMarkup=['<div data-view="plugins/messageBox" class="messageBox">','<div class="modal-header">','<h3 data-bind="text: title"></h3>',"</div>",'<div class="modal-body">','<p class="message" data-bind="text: message"></p>',"</div>",'<div class="modal-footer" data-bind="foreach: options">','<button class="btn" data-bind="click: function () { $parent.selectOption($data); }, text: $data, css: { \'btn-primary\': $index() == 0, autofocus: $index() == 0 }"></button>',"</div>","</div>"].join("\n"),l={MessageBox:u,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:function(){return d>0},getContext:function(e){return c[e||"default"]},addContext:function(e,t){t.name=e,c[e]=t;var i="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[i]=function(t,i){return this.show(t,i,e)}},createCompositionSettings:function(e,t){var i={model:e,activate:!1,transition:!1};return t.attached&&(i.attached=t.attached),t.compositionComplete&&(i.compositionComplete=t.compositionComplete),i},getDialog:function(e){return e?e.__dialog__:void 0},close:function(e){var t=this.getDialog(e);if(t){var i=Array.prototype.slice.call(arguments,1);t.close.apply(t,i)}},show:function(t,n,a){var o=this,l=c[a||"default"];return e.defer(function(e){s(t).then(function(t){var a=r.create();a.activateItem(t,n).then(function(r){if(r){var n=t.__dialog__={owner:t,context:l,activator:a,close:function(){var i=arguments;a.deactivateItem(t,!0).then(function(r){r&&(d--,l.removeHost(n),delete t.__dialog__,0===i.length?e.resolve():1===i.length?e.resolve(i[0]):e.resolve.apply(e,i))})}};n.settings=o.createCompositionSettings(t,l),l.addHost(n),d++,i.compose(n.host,n.settings)}else e.resolve(!1)})})}).promise()},showMessage:function(t,i,r){return e.isString(this.MessageBox)?l.show(this.MessageBox,[t,i||u.defaultTitle,r||u.defaultOptions]):l.show(new this.MessageBox(t,i,r))},install:function(e){t.showDialog=function(e,t,i){return l.show(e,t,i)},t.showMessage=function(e,t,i){return l.showMessage(e,t,i)},e.messageBox&&(l.MessageBox=e.messageBox),e.messageBoxView&&(l.MessageBox.prototype.getView=function(){return e.messageBoxView})}},l.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=a("body"),i=a('<div class="modalBlockout"></div>').css({"z-index":l.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),r=a('<div class="modalHost"></div>').css({"z-index":l.getNextZIndex()}).appendTo(t);if(e.host=r.get(0),e.blockout=i.get(0),!l.isOpen()){e.oldBodyMarginRight=t.css("margin-right"),e.oldInlineMarginRight=t.get(0).style.marginRight;var n=a("html"),o=t.outerWidth(!0),s=n.scrollTop();a("html").css("overflow-y","hidden");var c=a("body").outerWidth(!0);t.css("margin-right",c-o+parseInt(e.oldBodyMarginRight,10)+"px"),n.scrollTop(s)}},removeHost:function(e){if(a(e.host).css("opacity",0),a(e.blockout).css("opacity",0),setTimeout(function(){o.removeNode(e.host),o.removeNode(e.blockout)},this.removeDelay),!l.isOpen()){var t=a("html"),i=t.scrollTop();t.css("overflow-y","").scrollTop(i),e.oldInlineMarginRight?a("body").css("margin-right",e.oldBodyMarginRight):a("body").css("margin-right","")}},attached:function(e){a(e).css("visibility","hidden")},compositionComplete:function(e,t,i){var r=l.getDialog(i.model),n=a(e),o=n.find("img").filter(function(){var e=a(this);return!(this.style.width&&this.style.height||e.attr("width")&&e.attr("height"))});n.data("predefinedWidth",n.get(0).style.width);var s=function(){setTimeout(function(){n.data("predefinedWidth")||n.css({width:""});var e=n.outerWidth(!1),t=n.outerHeight(!1),i=a(window).height(),o=Math.min(t,i);n.css({"margin-top":(-o/2).toString()+"px","margin-left":(-e/2).toString()+"px"}),n.data("predefinedWidth")||n.outerWidth(e),t>i?n.css("overflow-y","auto"):n.css("overflow-y",""),a(r.host).css("opacity",1),n.css("visibility","visible"),n.find(".autofocus").first().focus()},1)};s(),o.load(s),n.hasClass("autoclose")&&a(r.blockout).click(function(){r.close()})}}),l});
define('plugins/http',["jquery","knockout"],function(e,t){return{callbackParam:"callback",get:function(t,i){return e.ajax(t,{data:i})},jsonp:function(t,i,r){return-1==t.indexOf("=?")&&(r=r||this.callbackParam,t+=-1==t.indexOf("?")?"?":"&",t+=r+"=?"),e.ajax({url:t,dataType:"jsonp",data:i})},post:function(i,r){return e.ajax({url:i,data:t.toJSON(r),type:"POST",contentType:"application/json",dataType:"json"})}}});
define('plugins/observable',["durandal/system","durandal/binder","knockout"],function(e,t,r){function n(e){var t=e[0];return"_"===t||"$"===t}function i(t){return!(!t||void 0===t.nodeType||!e.isNumber(t.nodeType))}function a(e){if(!e||i(e)||e.ko===r||e.jquery)return!1;var t=v.call(e);return-1==p.indexOf(t)&&!(e===!0||e===!1)}function o(e,t){var r=e.__observable__,n=!0;if(!r||!r.__full__){r=r||(e.__observable__={}),r.__full__=!0,h.forEach(function(r){e[r]=function(){n=!1;var e=b[r].apply(t,arguments);return n=!0,e}}),g.forEach(function(r){e[r]=function(){n&&t.valueWillMutate();var i=m[r].apply(e,arguments);return n&&t.valueHasMutated(),i}}),f.forEach(function(r){e[r]=function(){for(var i=0,a=arguments.length;a>i;i++)s(arguments[i]);n&&t.valueWillMutate();var o=m[r].apply(e,arguments);return n&&t.valueHasMutated(),o}}),e.splice=function(){for(var r=2,i=arguments.length;i>r;r++)s(arguments[r]);n&&t.valueWillMutate();var a=m.splice.apply(e,arguments);return n&&t.valueHasMutated(),a};for(var i=0,a=e.length;a>i;i++)s(e[i])}}function s(t){var i,s;if(a(t)&&(i=t.__observable__,!i||!i.__full__)){if(i=i||(t.__observable__={}),i.__full__=!0,e.isArray(t)){var l=r.observableArray(t);o(t,l)}else for(var d in t)n(d)||i[d]||(s=t[d],e.isFunction(s)||c(t,d,s));y&&e.log("Converted",t)}}function l(e,t,r){var n;e(t),n=e.peek(),r?n?n.destroyAll||o(n,e):(n=[],e(n),o(n,e)):s(n)}function c(t,n,i){var a,c,d=t.__observable__||(t.__observable__={});if(void 0===i&&(i=t[n]),e.isArray(i))a=r.observableArray(i),o(i,a),c=!0;else if("function"==typeof i){if(!r.isObservable(i))return null;a=i}else e.isPromise(i)?(a=r.observable(),i.then(function(t){if(e.isArray(t)){var n=r.observableArray(t);o(t,n),t=n}a(t)})):(a=r.observable(i),s(i));return Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:a,set:r.isWriteableObservable(a)?function(t){t&&e.isPromise(t)?t.then(function(t){l(a,t,e.isArray(t))}):l(a,t,c)}:void 0}),d[n]=a,a}function d(t,n,i){var a,o={owner:t,deferEvaluation:!0};return"function"==typeof i?o.read=i:("value"in i&&e.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof i.get&&e.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),o.read=i.get,o.write=i.set),a=r.computed(o),t[n]=a,c(t,n,a)}var u,v=Object.prototype.toString,p=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],h=["remove","removeAll","destroy","destroyAll","replace"],g=["pop","reverse","sort","shift","splice"],f=["push","unshift"],m=Array.prototype,b=r.observableArray.fn,y=!1;return u=function(e,t){var n,i,a;return e?(n=e.__observable__,n&&(i=n[t])?i:(a=e[t],r.isObservable(a)?a:c(e,t,a))):null},u.defineProperty=d,u.convertProperty=c,u.convertObject=s,u.install=function(e){var r=t.binding;t.binding=function(e,t,n){n.applyBindings&&!n.skipConversion&&s(e),r(e,t)},y=e.logConversion},u});
define('plugins/serializer',["durandal/system"],function(e){return{typeAttribute:"type",space:void 0,replacer:function(e,t){if(e){var r=e[0];if("_"===r||"$"===r)return void 0}return t},serialize:function(t,r){return r=void 0===r?{}:r,(e.isString(r)||e.isNumber(r))&&(r={space:r}),JSON.stringify(t,r.replacer||this.replacer,r.space||this.space)},getTypeId:function(e){return e?e[this.typeAttribute]:void 0},typeMap:{},registerType:function(){var t=arguments[0];if(1==arguments.length){var r=t[this.typeAttribute]||e.getModuleId(t);this.typeMap[r]=t}else this.typeMap[t]=arguments[1]},reviver:function(e,t,r,n){var i=r(t);if(i){var a=n(i);if(a)return a.fromJSON?a.fromJSON(t):new a(t)}return t},deserialize:function(e,t){var r=this;t=t||{};var n=t.getTypeId||function(e){return r.getTypeId(e)},i=t.getConstructor||function(e){return r.typeMap[e]},a=t.reviver||function(e,t){return r.reviver(e,t,n,i)};return JSON.parse(e,a)}}});
define('plugins/widget',["durandal/system","durandal/composition","jquery","knockout"],function(e,t,r,n){function i(e,r){var i=n.utils.domData.get(e,l);i||(i={parts:t.cloneNodes(n.virtualElements.childNodes(e))},n.virtualElements.emptyNode(e),n.utils.domData.set(e,l,i)),r.parts=i.parts}var a={},o={},s=["model","view","kind"],l="durandal-widget-data",c={getSettings:function(t){var r=n.utils.unwrapObservable(t())||{};if(e.isString(r))return{kind:r};for(var i in r)r[i]=-1!=n.utils.arrayIndexOf(s,i)?n.utils.unwrapObservable(r[i]):r[i];return r},registerKind:function(e){n.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,r,n,a,o){var s=c.getSettings(r);s.kind=e,i(t,s),c.create(t,s,o,!0)}},n.virtualElements.allowedBindings[e]=!0,t.composeBindings.push(e+":")},mapKind:function(e,t,r){t&&(o[e]=t),r&&(a[e]=r)},mapKindToModuleId:function(e){return a[e]||c.convertKindToModulePath(e)},convertKindToModulePath:function(e){return"widgets/"+e+"/viewmodel"},mapKindToViewId:function(e){return o[e]||c.convertKindToViewPath(e)},convertKindToViewPath:function(e){return"widgets/"+e+"/view"},createCompositionSettings:function(e,t){return t.model||(t.model=this.mapKindToModuleId(t.kind)),t.view||(t.view=this.mapKindToViewId(t.kind)),t.preserveContext=!0,t.activate=!0,t.activationData=t,t.mode="templated",t},create:function(e,r,n,i){i||(r=c.getSettings(function(){return r},e));var a=c.createCompositionSettings(e,r);t.compose(e,a,n)},install:function(e){if(e.bindingName=e.bindingName||"widget",e.kinds)for(var r=e.kinds,a=0;a<r.length;a++)c.registerKind(r[a]);n.bindingHandlers[e.bindingName]={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,r,n,a){var o=c.getSettings(t);i(e,o),c.create(e,o,a,!0)}},t.composeBindings.push(e.bindingName+":"),n.virtualElements.allowedBindings[e.bindingName]=!0}};return c});
define('transitions/entrance',["durandal/system","durandal/composition","jquery"],function(e,t,r){var n=100,i={marginRight:0,marginLeft:0,opacity:1},a={marginLeft:"",marginRight:"",opacity:"",display:""},o=function(t){return e.defer(function(e){function o(){e.resolve()}function s(){t.keepScrollPosition||r(document).scrollTop(0)}function l(){s(),t.triggerAttach();var e={marginLeft:d?"0":"20px",marginRight:d?"0":"-20px",opacity:0,display:"block"},n=r(t.child);n.css(e),n.animate(i,{duration:c,easing:"swing",always:function(){n.css(a),o()}})}if(t.child){var c=t.duration||500,d=!!t.fadeOnly;t.activeView?r(t.activeView).fadeOut({duration:n,always:l}):l()}else r(t.activeView).fadeOut(n,o)}).promise()};return o});

require(["main"]);
}());